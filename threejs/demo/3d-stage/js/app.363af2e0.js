(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],u=0,h=[];u<o.length;u++)s=o[u],r[s]&&h.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);m&&m(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},i=[];function s(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"46d9bf9c"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise(function(t,n){a=r[e]=[t,n]});t.push(a[2]=n);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=s(e),i=function(t){l.onerror=l.onload=null,clearTimeout(c);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+n+": "+i+")");s.type=n,s.request=i,a[1](s)}r[e]=void 0}};var c=setTimeout(function(){i({type:"timeout",target:l})},12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var m=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"034f":function(e,t,a){"use strict";var n=a("64a9"),r=a.n(n);r.a},"0775":function(e,t,a){"use strict";var n=a("a06c"),r=a.n(n);r.a},"12dd":function(e,t,a){},"1a45":function(e,t,a){"use strict";var n=a("7696"),r=a.n(n);r.a},"1e8e":function(e,t,a){"use strict";var n=a("2bbb"),r=a.n(n);r.a},"1f43":function(e,t,a){"use strict";var n=a("2334"),r=a.n(n);r.a},2334:function(e,t,a){},"23ff":function(e,t,a){},"2bbb":function(e,t,a){},"2d59":function(e,t,a){"use strict";var n=a("ed96"),r=a.n(n);r.a},4918:function(e,t,a){},"493d":function(e,t){e.exports=_dll_three_114e2f07},"4b8e":function(e,t,a){"use strict";var n=a("5713"),r=a.n(n);r.a},5713:function(e,t,a){},"5a89":function(e,t,a){e.exports=a("493d")(1)},"64a9":function(e,t,a){},7095:function(e,t,a){"use strict";var n=a("a21d"),r=a.n(n);r.a},7696:function(e,t,a){},9609:function(e,t,a){"use strict";var n=a("ad15"),r=a.n(n);r.a},a06c:function(e,t,a){},a21d:function(e,t,a){},a277:function(e,t,a){"use strict";var n=a("df56"),r=a.n(n);r.a},ad15:function(e,t,a){},b0c8:function(e,t,a){},b7b0:function(e,t,a){"use strict";var n=a("db99"),r=a.n(n);r.a},cb69:function(e,t,a){"use strict";var n=a("b0c8"),r=a.n(n);r.a},cd49:function(t,a,n){"use strict";n.r(a);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],o=(n("034f"),n("2877")),l={},c=Object(o["a"])(l,i,s,!1,null,null,null),u=c.exports,m=n("8c4f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("Stage"),a("LeftSide"),a("RightSide"),a("TextureView")],1)},d=[],f=n("d225"),p=n("308d"),v=n("6bb5"),g=n("4e2b"),b=n("9ab4"),y=n("60a3"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._m(0),a("h3",[e._v("Installed CLI Plugins")]),e._m(1),a("h3",[e._v("Essential Links")]),e._m(2),a("h3",[e._v("Ecosystem")]),e._m(3)])},C=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n    For a guide and recipes on how to configure / customize this project,"),a("br"),e._v("\n    check out the\n    "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(".\n  ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-typescript",target:"_blank",rel:"noopener"}},[e._v("typescript")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-unit-mocha",target:"_blank",rel:"noopener"}},[e._v("unit-mocha")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],_=function(e){function t(){return Object(f["a"])(this,t),Object(p["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(g["a"])(t,e),t}(y["d"]);b["a"]([Object(y["b"])()],_.prototype,"msg",void 0),_=b["a"]([y["a"]],_);var T=_,M=T,k=(n("cfae"),Object(o["a"])(M,w,C,!1,null,"341b83d0",null)),E=k.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stage"},[a("div",{staticClass:"btns"},[a("input",{ref:"file",staticClass:"file",attrs:{type:"file"},on:{change:e.handleFile}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-sold-out"},on:{click:e.handleLoad}},[e._v("加载模型")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:e.handleSave}},[e._v("导出模型")])],1),a("p",{staticClass:"info"},[e._v("Q-坐标系 | W-移动 | E-旋转 | R-缩放 | G-参考线")]),a("canvas",{ref:"canvas",staticClass:"canvas"})])},O=[],I=(n("c5f6"),n("7f7f"),n("28a5"),n("b0b4")),L=n("75fc"),x=(n("ac6a"),n("673e"),n("14b9"),n("4917"),n("5a89")),S=n("4721"),V=n("b1f1"),$=n("34ad"),P=function(){function e(){Object(f["a"])(this,e),this.version="v"+Math.random(),console.log(this.version)}return Object(I["a"])(e,[{key:"init",value:function(e){this._sender=e}},{key:"on",value:function(e,t){this._sender.addEventListener(e,t)}},{key:"send",value:function(e,t){this._sender.dispatchEvent(new CustomEvent(e,{detail:t}))}}],[{key:"ins",get:function(){return this._ins||(this._ins=new e),this._ins}}]),e}();P.SELECT_ITEM="select item",P.DELETE_ITEM="delete item",P.COPY_ITEM="copy item",P.DELETE_TEXTURE="delete texture",P.ADD_LIGHT="add light",P.SELECT_LIGHT="select light",P.CHANGE_PARAM="change param",P.CHANGE_TRANSFORM="change transform",P.CHANGE_MATERIAL="change material",P.CHANGE_ITEM_PARAM="change item param";var G=n("9e5c");function N(e){function t(e){var t=!1,a=new G["a"];a.parse(e,function(e){if(console.log(e),e instanceof ArrayBuffer)r(e,"scene.glb");else{var t=JSON.stringify(e,null,2);n(t,"scene.gltf")}},{binary:!1,embedImages:t,forcePowerOfTwoTextures:t,truncateDrawRange:!1})}function a(e,t){var a=document.createElement("a");a.style.display="none",document.body.appendChild(a),a.href=URL.createObjectURL(e),a.download=t,a.click()}function n(e,t){a(new Blob([e],{type:"text/plain"}),t)}function r(e,t){a(new Blob([e],{type:"application/octet-stream"}),t)}console.log("GLTFTooler"),console.log(e),t(e)}var B=N,A=(n("7514"),[{name:"MeshBasicMaterial",type:"MeshBasicMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0}},{name:"MeshNormalMaterial",type:"MeshNormalMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0}},{name:"MeshLambertMaterial",type:"MeshLambertMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0,emissive:"#ffffff",emissiveIntensity:.1,reflectivity:.1,refractionRatio:.1}},{name:"MeshPhongMaterial",type:"MeshPhongMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0,emissive:"#ffffff",emissiveIntensity:.1,reflectivity:.1,refractionRatio:.1,specular:"#ffffff",shininess:.1}},{name:"MeshToonMaterial",type:"MeshToonMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0}},{name:"MeshStandardMaterial",type:"MeshStandardMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0,roughness:.1,metalness:.1,bumpMap:null,bumpScale:.1}}]),D=function(){function e(){Object(f["a"])(this,e)}return Object(I["a"])(e,null,[{key:"getType",value:function(e){var t;return e=e.split(".")[0],t="wireframe"==e||"transparent"==e||"visible"==e||"helpVisible"==e?this.TYPE_SWITCH:"map"==e||"bumpMap"==e?this.TYPE_IMAGE:"color"==e||"emissive"==e||"specular"==e||"skyColor"==e||"groundColor"==e?this.TYPE_COLOR:this.TYPE_NUMBER,t}},{key:"setObjectValue",value:function(e,t,a){var n=t.split(".");if(1==n.length)e[t]=a;else{for(var r=e,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=a}}},{key:"copyTransform",value:function(e){var t=e.position,a=e.rotation,n=e.scale;return{position:{x:t.x,y:t.y,z:t.z},rotation:{x:a.x,y:a.y,z:a.z},scale:{x:n.x,y:n.y,z:n.z}}}},{key:"copyMaterialParam",value:function(e){var t=A.find(function(t){return t.type==e.type}),a={};for(var n in t.param)"map"==n||"bumpMap"==n?e[n]&&e[n].image?a[n]={image:e[n].image.currentSrc,repeatX:e[n].repeat.x,repeatY:e[n].repeat.y}:a[n]={}:a[n]=e[n];return a}}]),e}();D.TYPE_NUMBER="type number",D.TYPE_COLOR="type color",D.TYPE_IMAGE="type image",D.TYPE_SWITCH="type switch";var R,H=function(e){function t(e,a){var n;return Object(f["a"])(this,t),n=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a)),n.helpVisible=!0,n.dragItem=new x["Mesh"](new x["SphereBufferGeometry"](.5),new x["MeshNormalMaterial"]),n.dragItem.name="custom drag",n.name="CustomAmbientLight",n.add(n.dragItem),n}return Object(g["a"])(t,e),Object(I["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new x["Vector3"])}},{key:"parameters",get:function(){return{color:this.color,intensity:this.intensity,helpVisible:this.helpVisible}}}]),t}(x["AmbientLight"]),Y=function(e){function t(e,a){var n;return Object(f["a"])(this,t),n=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a)),n.helpVisible=!0,n.dragItem=new x["Mesh"](new x["BoxBufferGeometry"](1,1,.2),new x["MeshNormalMaterial"]),n.dragItem.name="custom drag",n.name="CustomDirectionalLight",n.castShadow=!0,n.shadow.mapSize.width=512,n.shadow.mapSize.height=512,n.shadow.camera.near=.5,n.shadow.camera.far=500,n.add(n.dragItem),n}return Object(g["a"])(t,e),Object(I["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new x["Vector3"])}},{key:"parameters",get:function(){return{color:this.color,intensity:this.intensity,helpVisible:this.helpVisible}}}]),t}(x["DirectionalLight"]),z=function(e){function t(e,a,n){var r;return Object(f["a"])(this,t),r=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a,n)),r.helpVisible=!0,r.dragItem=new x["Mesh"](new x["BoxBufferGeometry"],new x["MeshNormalMaterial"]),r.dragItem.name="custom drag",r.name="CustomHemisphereLight",r.add(r.dragItem),r}return Object(g["a"])(t,e),Object(I["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new x["Vector3"])}},{key:"parameters",get:function(){return{skyColor:this.skyColor,groundColor:this.groundColor,intensity:this.intensity,helpVisible:this.helpVisible}}}]),t}(x["HemisphereLight"]),W=function(e){function t(e,a,n,r){var i;return Object(f["a"])(this,t),i=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a,n,r)),i.helpVisible=!0,i.dragItem=new x["Mesh"](new x["SphereBufferGeometry"](.4),new x["MeshNormalMaterial"]),i.dragItem.name="custom drag",i.name="CustomPointLight",i.castShadow=!0,i.add(i.dragItem),i}return Object(g["a"])(t,e),Object(I["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new x["Vector3"])}},{key:"parameters",get:function(){return{color:this.color,intensity:this.intensity,distance:this.distance,decay:this.decay,helpVisible:this.helpVisible}}}]),t}(x["PointLight"]),U=function(e){function t(e,a,n,r,i,s){var o;return Object(f["a"])(this,t),o=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a,n,r,i,s)),o.helpVisible=!0,o.dragItem=new x["Mesh"](new x["BoxBufferGeometry"](.4),new x["MeshNormalMaterial"]),o.dragItem.name="custom drag",o.name="CustomSpotLight",o.castShadow=!0,o.add(o.dragItem),o}return Object(g["a"])(t,e),Object(I["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new x["Vector3"])}},{key:"parameters",get:function(){return{color:this.color,intensity:this.intensity,distance:this.distance,angle:this.angle,exponent:this.exponent,decay:this.decay,helpVisible:this.helpVisible}}}]),t}(x["SpotLight"]),F=function(e){function t(e,a,n,r){var i;return Object(f["a"])(this,t),i=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a,n,r)),i.helpVisible=!0,i.dragItem=new x["Mesh"](new x["BoxBufferGeometry"](.2),new x["MeshNormalMaterial"]),i.dragItem.name="custom drag",i.name="CustomRectAreaLight",i.add(i.dragItem),i}return Object(g["a"])(t,e),Object(I["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new x["Vector3"])}},{key:"parameters",get:function(){return{color:this.color,intensity:this.intensity,width:this.width,height:this.height,helpVisible:this.helpVisible}}}]),t}(x["RectAreaLight"]),X=function(){function e(t){var a=this;Object(f["a"])(this,e),this.dragList=[],console.log("THREE.BackSide = "+x["BackSide"]),P.ins.init(t),this.canvas=t,this.renderer=new x["WebGLRenderer"]({canvas:t,antialias:!0}),this.scene=new x["Scene"],this.camera=new x["PerspectiveCamera"](75,window.innerWidth/window.innerHeight,.1,100),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(new x["Color"](16777215)),this.renderer.shadowMap.enabled=!0,this.camera.position.set(3,4,5),this.camera.lookAt(new x["Vector3"]),this.orbitControls=new S["a"](this.camera,t),this.transformControls=new V["a"](this.camera,this.renderer.domElement),this.transformControls.addEventListener("dragging-changed",function(e){a.orbitControls.enabled=!e.value}),this.transformControls.addEventListener("objectChange",function(e){-1!=a.transformControls.object.name.indexOf("Light")?a.sendLightInfo(a.transformControls.object):a.sendMeshInfo(a.transformControls.object),a.scene.add(a.transformControls)}),this.rayCaster=new x["Raycaster"],t.addEventListener("mousedown",function(e){a.selectObject(e)}),window.addEventListener("resize",function(e){return a.onResize(e)},!1),window.addEventListener("keydown",function(e){switch(console.log(e.keyCode),e.keyCode){case 81:a.transformControls.setSpace("local"===a.transformControls.space?"world":"local");break;case 87:a.transformControls.setMode("translate");break;case 69:a.transformControls.setMode("rotate");break;case 82:a.transformControls.setMode("scale");break;case 71:a.grid.visible=!a.grid.visible;break}}),this.grid=new x["GridHelper"](80,80,13560057,15790320),this.grid.material.transparent=!0,this.grid.material.opacity=.4,this.scene.add(this.grid),this.init()}return Object(I["a"])(e,[{key:"onResize",value:function(e){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"deleteItem",value:function(){var e=this.transformControls.object;e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose(),this.scene.remove(e),this.scene.remove(this.transformControls),this.dragList=this.dragList.filter(function(t){return t!=e})}},{key:"copyItem",value:function(){var e=this.transformControls.object,t=e.clone();this.scene.add(t),this.transformControls.attach(t),this.scene.add(this.transformControls),this.dragList.push(t),e.name.match(/Custom.*Light/)?this.sendLightInfo(t):this.sendMeshInfo(t)}},{key:"changeItemTransform",value:function(e){var t=this.transformControls.object;t.position.set(e.position.x,e.position.y,e.position.z),t.rotation.set(e.rotation.x,e.rotation.y,e.rotation.z),t.scale.set(e.scale.x,e.scale.y,e.scale.z),this.sendMeshInfo(t)}},{key:"changeGeometryParam",value:function(e){var t,a=this.transformControls.object;"BoxBufferGeometry"==a.name?t=new x["BoxBufferGeometry"](e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments):"SphereBufferGeometry"==a.name?t=new x["SphereBufferGeometry"](e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength):"IcosahedronBufferGeometry"==a.name?t=new x["IcosahedronBufferGeometry"](e.radius,e.detail):"CylinderBufferGeometry"==a.name?t=new x["CylinderBufferGeometry"](e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength):"OctahedronBufferGeometry"==a.name?t=new x["OctahedronBufferGeometry"](e.radius,e.detail):"TorusBufferGeometry"==a.name?t=new x["TorusBufferGeometry"](e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc):"ConeBufferGeometry"==a.name?t=new x["ConeBufferGeometry"](e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength):"PlaneBufferGeometry"==a.name&&(t=new x["PlaneBufferGeometry"](e.width,e.height,e.widthSegments,e.heightSegments)),this.updateGroupGeometry(a,t),this.sendMeshInfo(a)}},{key:"toggerMaterial",value:function(e){var t,a=this.transformControls.object;"MeshBasicMaterial"==e?t=new x["MeshBasicMaterial"]:"MeshNormalMaterial"==e?t=new x["MeshNormalMaterial"]:"MeshLambertMaterial"==e?t=new x["MeshLambertMaterial"]:"MeshPhongMaterial"==e?t=new x["MeshPhongMaterial"]:"MeshToonMaterial"==e?t=new x["MeshToonMaterial"]:"MeshStandardMaterial"==e&&(t=new x["MeshStandardMaterial"]),a.material=t,this.sendMeshInfo(a)}},{key:"changeCommonMaterial",value:function(e,t){var a=this.transformControls.object,n=D.getType(e);n==D.TYPE_COLOR?a.material[e]=new x["Color"](t):n==D.TYPE_NUMBER?a.material[e]=Number(t):n==D.TYPE_SWITCH&&(a.material[e]=Boolean(t)),this.sendMeshInfo(a)}},{key:"changeRepeatMaterial",value:function(e,t,a){var n=this.transformControls.object;n.material[e]&&("repeatX"==t?n.material[e].repeat.x=Number(a):n.material[e].repeat.y=Number(a),n.material[e].needsUpdate=!0,n.material.needsUpdate=!0,this.sendMeshInfo(n))}},{key:"changeTextureMaterial",value:function(e,t){var a=this,n=this.transformControls.object,r=(new x["TextureLoader"]).load(t,function(){n.material[e].needsUpdate=!0,n.material.needsUpdate=!0,a.sendMeshInfo(n)});r.wrapS=x["RepeatWrapping"],r.wrapT=x["RepeatWrapping"],n.material[e]=r}},{key:"deleteTexture",value:function(e){var t=this.transformControls.object;t.material[e]=null,t.material.needsUpdate=!0,this.sendMeshInfo(t)}},{key:"changeLightParam",value:function(e,t){var a=this.transformControls.object,n=D.getType(e);n==D.TYPE_COLOR?a[e]=new x["Color"](t):n==D.TYPE_NUMBER?a[e]=Number(t):n==D.TYPE_SWITCH&&(a[e]=Boolean(t)),this.sendLightInfo(a)}},{key:"sendLightInfo",value:function(e){if(e.name.match(/Custom.*Light/)){var t=D.copyTransform(e);P.ins.send(P.SELECT_LIGHT,{name:e.name,parameters:e.parameters,transform:t}),e.update()}}},{key:"sendMeshInfo",value:function(e){if(e){var t=e.geometry.parameters,a=D.copyMaterialParam(e.material),n=D.copyTransform(e);P.ins.send(P.SELECT_ITEM,{name:e.name,parameters:t,material:a,materialType:e.material.type,transform:n})}}},{key:"selectObject",value:function(e){e.preventDefault();var t=new x["Vector2"];t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,this.rayCaster.setFromCamera(t,this.camera);var a=this.rayCaster.intersectObjects(this.dragList,!0);if(a[0]){var n=a[0].object;"custom drag"==n.name?(this.transformControls.attach(n.parent),this.sendLightInfo(n.parent)):(this.transformControls.attach(n),this.sendMeshInfo(n)),this.scene.add(this.transformControls)}else this.orbitControls.enabled=!0;console.log(a)}},{key:"updateGroupGeometry",value:function(e,t){t.isGeometry&&(t=(new x["BufferGeometry"]).fromGeometry(t)),e.geometry.dispose(),e.geometry=t}},{key:"getCanvas",value:function(e,t){var a=512,n=512,r=document.createElement("canvas");r.width=a,r.height=n;var i=r.getContext("2d");return i.font="400px bold",i.fillStyle=t,i.textAlign="center",i.textBaseline="middle",i.fillText(e,a/2,n/2),r}},{key:"addWorldTip",value:function(e,t,a){var n=new x["CanvasTexture"](this.getCanvas(e,t)),r=new x["SpriteMaterial"]({map:n,transparent:!0,sizeAttenuation:!0}),i=new x["Sprite"](r);i.position.copy(a),this.grid.add(i)}},{key:"init",value:function(){this.addWorldTip("x","#ff0000",new x["Vector3"](42,.5,0)),this.addWorldTip("-x","#ff0000",new x["Vector3"](-42,.5,0)),this.addWorldTip("z","#0000ff",new x["Vector3"](0,.5,42)),this.addWorldTip("-z","#0000ff",new x["Vector3"](0,.5,-42)),this.animate()}},{key:"addLight",value:function(e){var t;"AmbientLight"==e?t=new H(16711680):"DirectionalLight"==e?t=new Y(16711680):"HemisphereLight"==e?t=new z(16711680):"PointLight"==e?t=new W(16711680):"SpotLight"==e?t=new U(16711680):"RectAreaLight"==e&&(t=new F(16711680)),t&&(this.scene.add(t),this.dragList.push(t),this.transformControls.attach(t),this.scene.add(this.transformControls),this.orbitControls.enabled=!1)}},{key:"animate",value:function(){var e=this;requestAnimationFrame(function(){e.animate()}),this.renderer.render(this.scene,this.camera)}},{key:"getFrame",value:function(e){var t=new x["MeshBasicMaterial"]({color:16777215,opacity:.1,wireframe:!0,transparent:!0,depthTest:!0,depthWrite:!0});console.log("getFrame");var a=new x["Mesh"](e,t);return a.name="frame_"+e.type,a}},{key:"addObject",value:function(e,t){var a;switch(console.log("add "+e),e){case"BoxBufferGeometry":a=new x["BoxBufferGeometry"](1,1,1);break;case"SphereBufferGeometry":a=new x["SphereBufferGeometry"](.5,12,12);break;case"IcosahedronBufferGeometry":a=new x["IcosahedronBufferGeometry"](1,0);break;case"CylinderBufferGeometry":a=new x["CylinderBufferGeometry"](.5,1,2,8,8);break;case"OctahedronBufferGeometry":a=new x["OctahedronBufferGeometry"](.5,0);break;case"TorusBufferGeometry":a=new x["TorusBufferGeometry"](2,.5,8,20,2*Math.PI);break;case"ConeBufferGeometry":a=new x["ConeBufferGeometry"](1,3,8,3);break;case"PlaneBufferGeometry":a=new x["PlaneBufferGeometry"](20,20);break;default:break}if(a){var n=new x["Vector3"];n.set(t.clientX/window.innerWidth*2-1,-t.clientY/window.innerHeight*2+1,.5),n.unproject(this.camera);var r=n.sub(this.camera.position).normalize(),i=-this.camera.position.z/r.z,s=(this.camera.position.clone().add(r.multiplyScalar(i)),new x["MeshStandardMaterial"]({color:(new x["Color"]).setHSL(Math.random(),1,.75),emissive:468276,side:x["FrontSide"],transparent:!0,opacity:1,flatShading:!0,wireframe:!1})),o=new x["Mesh"](a,s);o.name=e,o.castShadow=!0,o.receiveShadow=!0,this.scene.add(o),this.transformControls.attach(o),this.orbitControls.enabled=!1,this.scene.add(this.transformControls),this.dragList.push(o)}else console.log("no geo")}},{key:"exportObject",value:function(){var e=this,t=[];this.scene.children.forEach(function(a){-1==e.dragList.indexOf(a)&&(a.visible=!1,t.push(a))}),B(this.scene),t.forEach(function(e){e.visible=!0})}},{key:"loadObject",value:function(e){var t=this,a=new $["a"];a.parse(e,"",function(e){var a;(a=t.scene).add.apply(a,Object(L["a"])(e.scene.children))})}}]),e}(),J=function(e){function t(){return Object(f["a"])(this,t),Object(p["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(g["a"])(t,e),Object(I["a"])(t,[{key:"mounted",value:function(){var e=this;R=new X(this.$refs.canvas),this.$refs.canvas.addEventListener("mouseenter",this.mouseenter),P.ins.on(P.SELECT_ITEM,function(t){e.changeSelectItem(t)}),P.ins.on(P.SELECT_LIGHT,function(t){e.changeSelectLight(t)}),P.ins.on(P.CHANGE_MATERIAL,function(t){e.changeMaterial(t)}),P.ins.on(P.DELETE_TEXTURE,function(t){e.deleteTexture(t)}),P.ins.on(P.DELETE_ITEM,function(t){e.deleteItem(t)}),P.ins.on(P.COPY_ITEM,function(t){e.copyItem(t)}),P.ins.on(P.ADD_LIGHT,function(t){e.addLight(t)}),P.ins.on(P.CHANGE_ITEM_PARAM,function(t){e.changeItemParam(t)})}},{key:"addLight",value:function(e){R.addLight(e.detail)}},{key:"changeMaterial",value:function(e){R.toggerMaterial(e.detail)}},{key:"deleteTexture",value:function(e){R.deleteTexture(e.detail)}},{key:"changeItemParam",value:function(e){console.log("Paramview组件发过来的消息"),console.log(e.detail);var t=e.detail.value,a=e.detail.name.split(".");if("geometry"==a[0]){var n=Object.assign(this.$store.state.curParam,{});n[a[1]]=Number(t),R.changeGeometryParam(n)}else if("position"==a[0]||"rotation"==a[0]||"scale"==a[0]){var r=Object.assign(this.$store.state.curTransform,{});r[a[0]][a[1]]=Number(t),R.changeItemTransform(r)}else if("material"==a[0]){var i=Object.assign(this.$store.state.curMaterial,{});"map"==a[1]||"bumpMap"==a[1]?("image"==a[2]?R.changeTextureMaterial(a[1],t):R.changeRepeatMaterial(a[1],a[2],t),i[a[1]]||(i[a[1]]={}),i[a[1]][a[2]]=t):(i[a[1]]=t,R.changeCommonMaterial(a[1],t))}else"light"==a[0]&&R.changeLightParam(a[1],t)}},{key:"deleteItem",value:function(e){R.deleteItem()}},{key:"copyItem",value:function(e){R.copyItem()}},{key:"mouseenter",value:function(e){this.$store.state.dragItem&&R.addObject(this.$store.state.dragItem.name,e)}},{key:"changeSelectItem",value:function(e){this.$store.commit("changeCurItemName",e.detail.name),this.$store.commit("changeCurDragType","mesh"),this.$store.commit("changeDrawer",!0),this.$store.commit("changeMaterialType",e.detail.materialType),this.$store.commit("changeCurMaterial",e.detail.material),this.$store.commit("changeCurParams",e.detail.parameters),this.$store.commit("changeCurTransform",e.detail.transform)}},{key:"changeSelectLight",value:function(e){this.$store.commit("changeCurItemName",e.detail.name),this.$store.commit("changeCurDragType","light"),this.$store.commit("changeDrawer",!0),this.$store.commit("changeCurParams",e.detail.parameters),this.$store.commit("changeCurTransform",e.detail.transform)}},{key:"changeCurTransform",value:function(e){this.$store.commit("changeCurTransform",e.detail)}},{key:"handleFile",value:function(e){console.log(e);var t=new FileReader;t.readAsArrayBuffer(e.target.files[0]),t.onload=function(e){console.info(t.result);var a=new DataView(t.result);console.log(a),R.loadObject(a.buffer)}}},{key:"handleLoad",value:function(){this.$refs.file.click()}},{key:"handleSave",value:function(){R.exportObject()}}]),t}(y["d"]);b["a"]([Object(y["b"])()],J.prototype,"msg",void 0),J=b["a"]([y["a"]],J);var q=J,Q=q,K=(n("2d59"),Object(o["a"])(Q,j,O,!1,null,"4330533d",null)),Z=K.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left-side"},[a("el-collapse",{attrs:{accordion:""},on:{change:e.handleCollapse},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"几何物体",name:"0"}},e._l(e.geometryList,function(t,n){return a("div",{key:t.name,staticClass:"geometry"},[a("img",{staticClass:"img",attrs:{draggable:"false",src:t.img,"data-idx":n}}),a("div",{staticClass:"tip"},[e._v(e._s(t.name))])])}),0),a("el-collapse-item",{attrs:{title:"灯光",name:"1"}},e._l(e.lightList,function(t,n){return a("div",{key:t.name,staticClass:"light"},[a("el-button",{attrs:{"data-idx":n},on:{click:e.addLight}},[e._v(e._s(t.name))])],1)}),0)],1)],1)},te=[],ae=function(e){function t(){var e;return Object(f["a"])(this,t),e=Object(p["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.tip="ok",e.activeNames="0",e.geometryList=[],e.lightList=[],e}return Object(g["a"])(t,e),Object(I["a"])(t,[{key:"mounted",value:function(){var e=this;this.$axios.get("asset/data.json").then(function(t){e.geometryList=t.data.geometry,e.lightList=t.data.light}),this.$el.addEventListener("mousedown",function(t){var a=t.target;if("img"==a.className){var n=e.geometryList[a.dataset.idx];e.$store.commit("changeDrag",n),window.addEventListener("mousemove",e.mouseMove),window.addEventListener("mouseup",e.mouseUp)}})}},{key:"handleCollapse",value:function(e){console.log(e)}},{key:"mouseMove",value:function(e){}},{key:"mouseUp",value:function(e){window.removeEventListener("mousemove",this.mouseMove),window.removeEventListener("mouseup",this.mouseUp),this.$store.commit("changeDrag",null)}},{key:"addLight",value:function(e){var t=e.currentTarget,a=this.lightList[t.dataset.idx];P.ins.send(P.ADD_LIGHT,a.name)}}]),t}(y["d"]);b["a"]([Object(y["b"])()],ae.prototype,"msg",void 0),b["a"]([Object(y["c"])()],ae.prototype,"tip",void 0),b["a"]([Object(y["c"])()],ae.prototype,"activeNames",void 0),b["a"]([Object(y["c"])()],ae.prototype,"geometryList",void 0),b["a"]([Object(y["c"])()],ae.prototype,"lightList",void 0),ae=b["a"]([y["a"]],ae);var ne=ae,re=ne,ie=(n("b7b0"),Object(o["a"])(re,ee,te,!1,null,"108dbf4b",null)),se=ie.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right-side",class:{open:e.drawer}},[a(e.aim,{tag:"component"})],1)},le=[],ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"material-view"},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleChoose}},[a("span",{staticClass:"el-dropdown-link"},[a("span",{staticClass:"mat-btn"},[e._v("当前材质："+e._s(e.materialType))]),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.list,function(t,n){return a("el-dropdown-item",{key:t.name,attrs:{command:n}},[e._v(e._s(t.name))])}),1)],1),e._l(e.material,function(e,t){return a("div",{key:t,staticClass:"edit"},[a("ParamView",{attrs:{label:t,value:e,pname:"material."+t}})],1)})],2)},ue=[],me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"param-view"},[a(e.aim,{tag:"component",attrs:{label:e.label,value:e.value,pname:e.pname},on:{change:e.handleChange}})],1)},he=[],de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"number-view"},[a("div",{staticClass:"param"},[a("div",{staticClass:"state"},[a("div",{staticClass:"label"},[e._v(e._s(e.label)+":")]),a("input",{staticClass:"value",attrs:{type:"text","data-pname":e.pname},domProps:{value:e.value},on:{input:e.handleChange}})]),a("div",{staticClass:"block"},[a("input",{staticClass:"range",attrs:{type:"range",min:e.min,max:e.max,step:e.step,"data-pname":e.pname},domProps:{value:e.value},on:{input:e.handleChange}}),a("i",{staticClass:"el-icon-s-tools setting",on:{click:function(t){e.configVisible=!e.configVisible}}})]),e.configVisible?a("div",{staticClass:"config"},[a("div",{staticClass:"row"},[a("div",{staticClass:"label"},[e._v("最小值:")]),a("input",{staticClass:"value",attrs:{type:"text","data-pname":"min"},domProps:{value:e.min},on:{input:e.handleSetting}})]),a("div",{staticClass:"row"},[a("div",{staticClass:"label"},[e._v("最大值:")]),a("input",{staticClass:"value",attrs:{type:"text","data-pname":"max"},domProps:{value:e.max},on:{input:e.handleSetting}})]),a("div",{staticClass:"row"},[a("div",{staticClass:"label"},[e._v("步长:")]),a("input",{staticClass:"value",attrs:{type:"text","data-pname":"step"},domProps:{value:e.step},on:{input:e.handleSetting}})])]):e._e()])])},fe=[],pe={data:function(){return{configVisible:!1,min:0,max:10,step:1}},props:["label","value","pname"],computed:{},mounted:function(){},methods:{handleChange:function(e){this.$emit("change",this.pname,e.target.value)},handleSetting:function(e){var t=e.target.dataset.pname;this[t]=e.target.value}}},ve=pe,ge=(n("4b8e"),Object(o["a"])(ve,de,fe,!1,null,"7a845219",null)),be=ge.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"color-view"},[a("div",{staticClass:"param"},[a("div",{staticClass:"state"},[a("div",{staticClass:"label"},[e._v(e._s(e.label)+":")]),a("input",{staticClass:"value",attrs:{type:"color","data-pname":e.pname},domProps:{value:e.color},on:{input:e.handleChange}})])])])},we=[],Ce=(n("a481"),n("7618"));function _e(e,t,a){return Te(e)+Te(t)+Te(a)}function Te(e){return null==e?"00":(e=parseInt(e),0==e||isNaN(e)?"00":(e=Math.max(0,e),e=Math.min(e,255),e=Math.round(e),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16)))}var Me=_e,ke={data:function(){return{configVisible:!1,min:0,max:10,step:1}},props:["label","value","pname"],computed:{color:function(){var e;if(console.log("color ==== "+Object(Ce["a"])(this.value)),"string"==typeof this.value)e=this.value.replace("0x","#");else{var t=255*this.value.r,a=255*this.value.g,n=255*this.value.b;e="#"+Me(t,a,n)}return console.log(this.value,e),e}},mounted:function(){},methods:{handleChange:function(e){var t=e.target.value;this.$emit("change",this.pname,t)},handleSetting:function(e){var t=e.target.dataset.pname;this[t]=e.target.value}}},Ee=ke,je=(n("1a45"),Object(o["a"])(Ee,ye,we,!1,null,"6f3da8d8",null)),Oe=je.exports,Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"switch-view"},[a("div",{staticClass:"param"},[a("div",{staticClass:"state"},[a("div",{staticClass:"label"},[e._v(e._s(e.label)+":")]),a("div",{staticClass:"color",class:{active:e.value},on:{click:e.handleChange}},[a("div",{staticClass:"bar"})])])])])},Le=[],xe={data:function(){return{}},props:["label","value","pname"],computed:{},mounted:function(){},methods:{handleChange:function(e){this.$emit("change",this.pname,!this.value)}}},Se=xe,Ve=(n("a277"),Object(o["a"])(Se,Ie,Le,!1,null,"0b0e7202",null)),$e=Ve.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-view"},[a("div",{staticClass:"param"},[a("div",{staticClass:"state"},[a("div",{staticClass:"label"},[e._v(e._s(e.label)+":")]),e.value&&e.value.image?a("div",{staticClass:"img",style:{"background-image":"url("+e.value.image+")"},on:{click:e.handleEdit}}):e._e(),a("div",{staticClass:"choose",on:{click:e.handleEdit}},[a("i",{staticClass:"el-icon-picture-outline"}),e._v(" 修改")]),a("div",{staticClass:"delete",on:{click:e.handleDelete}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 删除")])]),e.value&&e.value.repeatX?a("NumberView",{attrs:{label:"repeatX",value:e.value.repeatX,pname:"material."+e.label+".repeatX"},on:{change:e.handleChange}}):e._e(),e.value&&e.value.repeatY?a("NumberView",{attrs:{label:"repeatY",value:e.value.repeatY,pname:"material."+e.label+".repeatY"},on:{change:e.handleChange}}):e._e()],1)])},Ge=[],Ne={data:function(){return{}},props:["label","value","pname"],components:{NumberView:be},computed:{editing:function(){return this.$store.state.changeTexureViewVisible}},watch:{},mounted:function(){},methods:{handleChange:function(e,t){this.$emit("change",e,t)},handleEdit:function(e){this.$store.commit("changeTexureViewVisible",!0),this.$store.commit("changeTexureViewType",this.pname+".image")},handleDelete:function(e){P.ins.send(P.DELETE_TEXTURE,this.label)}}},Be=Ne,Ae=(n("7095"),Object(o["a"])(Be,Pe,Ge,!1,null,"5053e604",null)),De=Ae.exports,Re={data:function(){return{}},props:["label","value","pname"],components:{NumberView:be,ColorView:Oe,SwitchView:$e,ImageView:De},computed:{material:function(){return this.$store.state.curMaterial},aim:function(){var e=D.getType(this.label);switch(e){case D.TYPE_SWITCH:return"SwitchView";case D.TYPE_COLOR:return"ColorView";case D.TYPE_IMAGE:return"ImageView";default:return"NumberView"}}},mounted:function(){},methods:{handleChange:function(e,t){P.ins.send(P.CHANGE_ITEM_PARAM,{name:e,value:t})}}},He=Re,Ye=(n("1e8e"),Object(o["a"])(He,me,he,!1,null,"3cf36566",null)),ze=Ye.exports,We={data:function(){return{cur:"",list:[]}},props:["materialType","material"],components:{ParamView:ze},computed:{},mounted:function(){this.list=A},methods:{handleChoose:function(e){this.$store.state.materialType!=this.list[e].name&&P.ins.send(P.CHANGE_MATERIAL,this.list[e].name)},handleChange:function(e,t){}}},Ue=We,Fe=(n("cf3f"),Object(o["a"])(Ue,ce,ue,!1,null,"7845497a",null)),Xe=Fe.exports,Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"transform-view"},e._l(e.list,function(t,n){return a("div",{key:n,staticClass:"edit"},[a("ParamView",{attrs:{label:n,value:t,pname:e.label+"."+n}})],1)}),0)},qe=[],Qe={data:function(){return{}},props:["list","label"],components:{ParamView:ze},computed:{},mounted:function(){},methods:{handleChange:function(t,a){var n=e.target.dataset.name;console.log(n);var r=n.split(".");if(1==r.length){var i={};i[n]=Number(e.target.value);var s=Object.assign(this.$store.state.curParam,i);this.$store.commit("changeCurParams",s),console.log("changeCurParams"),P.ins.send(P.CHANGE_PARAM,s)}else{var o=Object.assign(this.$store.state.curTransform,{});o[r[0]][r[1]]=Number(e.target.value),this.$store.commit("changeCurTransform",o),console.log("changeCurTransform"),P.ins.send(P.CHANGE_TRANSFORM,o)}}}},Ke=Qe,Ze=(n("cb69"),Object(o["a"])(Ke,Je,qe,!1,null,"3947050f",null)),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mesh-info"},[a("div",{staticClass:"title"},[a("div",{staticClass:"name"},[e._v("物体属性")]),a("div",{staticClass:"close",on:{click:e.handleClose}},[a("i",{staticClass:"el-icon-close"})])]),a("div",{staticClass:"cur-name"},[e._v(e._s(e.curItemName))]),a("el-collapse",{attrs:{accordion:""},on:{change:e.handleCollapse},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"材质",name:"0"}},[a("MaterialView",{attrs:{"material-type":e.materialType,material:e.material}})],1),a("el-collapse-item",{attrs:{title:"状态参数",name:"1"}},[a("TransformView",{attrs:{label:"geometry",list:e.list}})],1),a("el-collapse-item",{attrs:{title:"位置",name:"2"}},[a("TransformView",{attrs:{label:"position",list:e.curTransform.position}})],1),a("el-collapse-item",{attrs:{title:"旋转",name:"3"}},[a("TransformView",{attrs:{label:"rotation",list:e.curTransform.rotation}})],1),a("el-collapse-item",{attrs:{title:"缩放",name:"4"}},[a("TransformView",{attrs:{label:"scale",list:e.curTransform.scale}})],1)],1),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleCopy}},[e._v("原地复制")]),a("el-button",{attrs:{type:"danger"},on:{click:e.handleDelete}},[e._v("删除物体")])],1)],1)},at=[],nt={data:function(){return{value:0,direction:"rtl",activeNames:"0"}},components:{MaterialView:Xe,TransformView:et},computed:{list:function(){var e={},t=this.$store.state.curParam;for(var a in t)e[a]=t[a]||0;return e},curTransform:function(){var e=this.$store.state.curTransform;return e},materialType:function(){return this.$store.state.materialType},material:function(){return this.$store.state.curMaterial},drawer:function(){return this.$store.state.drawer},curItemName:function(){return this.$store.state.curItemName}},methods:{handleClose:function(){this.$store.commit("changeDrawer",!1)},handleCopy:function(){P.ins.send(P.COPY_ITEM)},handleDelete:function(){this.$store.commit("changeDrawer",!1),P.ins.send(P.DELETE_ITEM)},handleCollapse:function(e){console.log(e)},handleChange:function(e){}}},rt=nt,it=(n("0775"),Object(o["a"])(rt,tt,at,!1,null,"79ed44a1",null)),st=it.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"light-info"},[a("div",{staticClass:"title"},[a("div",{staticClass:"name"},[e._v("灯光属性")]),a("div",{staticClass:"close",on:{click:e.handleClose}},[a("i",{staticClass:"el-icon-close"})])]),a("div",{staticClass:"cur-name"},[e._v(e._s(e.curItemName))]),a("el-collapse",{attrs:{accordion:""},on:{change:e.handleCollapse},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"状态参数",name:"1"}},[a("TransformView",{attrs:{label:"light",list:e.list}})],1),a("el-collapse-item",{attrs:{title:"位置",name:"2"}},[a("TransformView",{attrs:{label:"position",list:e.curTransform.position}})],1),a("el-collapse-item",{attrs:{title:"旋转",name:"3"}},[a("TransformView",{attrs:{label:"rotation",list:e.curTransform.rotation}})],1),a("el-collapse-item",{attrs:{title:"缩放",name:"4"}},[a("TransformView",{attrs:{label:"scale",list:e.curTransform.scale}})],1)],1),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleCopy}},[e._v("原地复制")]),a("el-button",{attrs:{type:"danger"},on:{click:e.handleDelete}},[e._v("删除物体")])],1)],1)},lt=[],ct={data:function(){return{value:0,direction:"rtl",activeNames:"0"}},components:{MaterialView:Xe,TransformView:et},computed:{list:function(){var e={},t=this.$store.state.curParam;for(var a in t)e[a]=t[a]||0;return e},curTransform:function(){var e=this.$store.state.curTransform;return e},materialType:function(){return this.$store.state.materialType},material:function(){return this.$store.state.curMaterial},drawer:function(){return this.$store.state.drawer},curItemName:function(){return this.$store.state.curItemName}},methods:{handleClose:function(){this.$store.commit("changeDrawer",!1)},handleCopy:function(){P.ins.send(P.COPY_ITEM)},handleDelete:function(){this.$store.commit("changeDrawer",!1),P.ins.send(P.DELETE_ITEM)},handleCollapse:function(e){console.log(e)},handleChange:function(e){}}},ut=ct,mt=(n("9609"),Object(o["a"])(ut,ot,lt,!1,null,"727d7fc0",null)),ht=mt.exports,dt={data:function(){return{value:0,direction:"rtl",activeNames:["0"]}},components:{MaterialView:Xe,TransformView:et,MeshInfo:st,LightInfo:ht},computed:{list:function(){var e={},t=this.$store.state.curParam;for(var a in t)e[a]=t[a]||0;return e},curTransform:function(){var e=this.$store.state.curTransform;return e},materialType:function(){return this.$store.state.materialType},material:function(){return this.$store.state.curMaterial},drawer:function(){return this.$store.state.drawer},curDragType:function(){return this.$store.state.curDragType},aim:function(){return"light"==this.$store.state.curDragType?"LightInfo":"MeshInfo"}},methods:{handleClose:function(){this.$store.commit("changeDrawer",!1)},handleCopy:function(){P.ins.send(P.COPY_ITEM)},handleDelete:function(){this.$store.commit("changeDrawer",!1),P.ins.send(P.DELETE_ITEM)},handleCollapse:function(e){console.log(e)},handleChange:function(e){}}},ft=dt,pt=(n("d2af"),Object(o["a"])(ft,oe,le,!1,null,"0b1a6c5e",null)),vt=pt.exports,gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"texture-view"},[a("el-dialog",{attrs:{title:"选择贴图",visible:e.visible},on:{close:e.handleClose}},e._l(e.list,function(t,n){return a("div",{key:n,staticClass:"block",on:{click:function(a){return e.handleChange(t.url)}}},[a("div",{staticClass:"img",style:{"background-image":"url("+t.url+")"}}),a("div",{staticClass:"name"},[e._v(e._s(t.name))])])}),0)],1)},bt=[],yt={data:function(){return{list:[]}},components:{},computed:{visible:function(){return this.$store.state.texureViewVisible},chooseImage:function(){return this.$store.state.changeChooseImage}},mounted:function(){var e=this;this.$axios.get("asset/texture/list.json").then(function(t){e.list=t.data})},methods:{handleClose:function(){this.$store.commit("changeTexureViewVisible",!1)},handleChoose:function(e){this.$store.commit("changeCurMaterial",this.list[e].param)},handleChange:function(e){var t=this.$store.state.texureViewType;P.ins.send(P.CHANGE_ITEM_PARAM,{name:t,value:e}),this.$store.commit("changeTexureViewVisible",!1)}}},wt=yt,Ct=(n("1f43"),Object(o["a"])(wt,gt,bt,!1,null,"13fdc107",null)),_t=Ct.exports,Tt=function(e){function t(){return Object(f["a"])(this,t),Object(p["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(g["a"])(t,e),t}(y["d"]);Tt=b["a"]([Object(y["a"])({components:{HelloWorld:E,Stage:Z,LeftSide:se,RightSide:vt,TextureView:_t}})],Tt);var Mt=Tt,kt=Mt,Et=Object(o["a"])(kt,h,d,!1,null,null,null),jt=Et.exports;r["default"].use(m["a"]);var Ot=new m["a"]({mode:"hash",base:"",routes:[{path:"/",redirect:"/home"},{path:"/home",component:jt},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),It=n("2f62");r["default"].use(It["a"]);var Lt=new It["a"].Store({state:{dragItem:Object,curParam:Object,curMaterial:Object,curTransform:{},isDrag:!1,drawer:!1,texureViewVisible:!1,texureViewType:null,materialType:null,chooseImage:null,curDragType:null,curItemName:null},mutations:{changeDrag:function(e,t){e.dragItem=t},changeCurParams:function(e,t){e.curParam=t},changeCurTransform:function(e,t){e.curTransform=t},changeCurMaterial:function(e,t){e.curMaterial=t},changeDrawer:function(e,t){e.drawer=t},changeTexureViewVisible:function(e,t){e.texureViewVisible=t},changeChooseImage:function(e,t){e.chooseImage=t},changeTexureViewType:function(e,t){e.texureViewType=t},changeMaterialType:function(e,t){e.materialType=t},changeCurDragType:function(e,t){e.curDragType=t},changeCurItemName:function(e,t){e.curItemName=t}},actions:{}}),xt=n("5c96"),St=n.n(xt),Vt=n("bc3a"),$t=n.n(Vt);n("0fae");r["default"].use(St.a),r["default"].config.productionTip=!1,r["default"].prototype.$axios=$t.a,new r["default"]({router:Ot,store:Lt,render:function(e){return e(u)}}).$mount("#app")},cf3f:function(e,t,a){"use strict";var n=a("23ff"),r=a.n(n);r.a},cfae:function(e,t,a){"use strict";var n=a("4918"),r=a.n(n);r.a},d2af:function(e,t,a){"use strict";var n=a("12dd"),r=a.n(n);r.a},db99:function(e,t,a){},df56:function(e,t,a){},ed96:function(e,t,a){}});
//# sourceMappingURL=app.363af2e0.js.map