(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],u=0,h=[];u<o.length;u++)s=o[u],i[s]&&h.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);m&&m(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},i={app:0},r=[];function s(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"1889cb63"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a=i[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise(function(t,n){a=i[e]=[t,n]});t.push(a[2]=n);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=s(e),r=function(t){l.onerror=l.onload=null,clearTimeout(c);var a=i[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+n+": "+r+")");s.type=n,s.request=r,a[1](s)}i[e]=void 0}};var c=setTimeout(function(){r({type:"timeout",target:l})},12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var m=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"034f":function(e,t,a){"use strict";var n=a("64a9"),i=a.n(n);i.a},"0596":function(e,t,a){"use strict";var n=a("c9c4"),i=a.n(n);i.a},"10c3":function(e,t,a){},1522:function(e,t,a){},1730:function(e,t,a){"use strict";var n=a("2964"),i=a.n(n);i.a},"184e":function(e,t,a){},"1b26":function(e,t,a){},"1b57":function(e,t,a){},"21b2":function(e,t,a){"use strict";var n=a("1522"),i=a.n(n);i.a},2208:function(e,t,a){},2964:function(e,t,a){},"2ae0":function(e,t,a){"use strict";var n=a("1b57"),i=a.n(n);i.a},"341b":function(e,t,a){},"3cc4":function(e,t,a){"use strict";var n=a("4a74"),i=a.n(n);i.a},"493d":function(e,t){e.exports=_dll_three_114e2f07},"4a74":function(e,t,a){},"4ecd":function(e,t,a){"use strict";var n=a("edb4"),i=a.n(n);i.a},"535f":function(e,t,a){},"5a89":function(e,t,a){e.exports=a("493d")(1)},"64a9":function(e,t,a){},6850:function(e,t,a){"use strict";var n=a("fecd"),i=a.n(n);i.a},"6bd7":function(e,t,a){},7825:function(e,t,a){"use strict";var n=a("2208"),i=a.n(n);i.a},"78ae":function(e,t,a){},8672:function(e,t,a){"use strict";var n=a("535f"),i=a.n(n);i.a},8997:function(e,t,a){"use strict";var n=a("184e"),i=a.n(n);i.a},9281:function(e,t,a){},"936c":function(e,t,a){"use strict";var n=a("9281"),i=a.n(n);i.a},9396:function(e,t,a){"use strict";var n=a("341b"),i=a.n(n);i.a},"9f87":function(e,t,a){"use strict";var n=a("6bd7"),i=a.n(n);i.a},a537:function(e,t,a){"use strict";var n=a("78ae"),i=a.n(n);i.a},c9c4:function(e,t,a){},cd49:function(t,a,n){"use strict";n.r(a);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],o=(n("034f"),n("2877")),l={},c=Object(o["a"])(l,r,s,!1,null,null,null),u=c.exports,m=n("8c4f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("Stage"),a("LeftSide"),a("RightSide"),a("TextureView"),a("CustomGeometry"),a("MenuView")],1)},d=[],f=n("d225"),p=n("308d"),v=n("6bb5"),g=n("4e2b"),y=n("9ab4"),b=n("60a3"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stage"},[a("p",{staticClass:"info"},[e._v("Q-坐标系 | W-移动 | E-旋转 | R-缩放")]),a("canvas",{ref:"canvas",staticClass:"canvas"})])},E=[],C=(n("c5f6"),n("7f7f"),n("28a5"),n("b0b4")),_=(n("14b9"),n("5a89")),T=n("34ad"),k=n("8710"),O=function(){function e(){Object(f["a"])(this,e),this.version="v"+Math.random(),console.log(this.version)}return Object(C["a"])(e,[{key:"init",value:function(e){this._sender=e}},{key:"on",value:function(e,t){this._sender.addEventListener(e,t)}},{key:"send",value:function(e,t){this._sender.dispatchEvent(new CustomEvent(e,{detail:t}))}}],[{key:"ins",get:function(){return this._ins||(this._ins=new e),this._ins}}]),e}();O.SELECT_ITEM="select item",O.ITEM_INFO="item info",O.DELETE_ITEM="delete item",O.COPY_ITEM="copy item",O.MAKE_GROUP="make group",O.SPLIT_GROUP="split group",O.CHANGE_IS_ROOT="change is root",O.CUSTOM_GEOMETRY="custom geometry",O.DELETE_TEXTURE="delete texture",O.ADD_LIGHT="add light",O.SELECT_LIGHT="select light",O.GET_SCENE_TREE="get scene tree",O.SET_SCENE_TREE="set scene tree",O.SELECT_TREE_ITEM="select tree item",O.CHANGE_PARAM="change param",O.CHANGE_TRANSFORM="change transform",O.CHANGE_MATERIAL="change material",O.CHANGE_ITEM_PARAM="change item param",O.CHANGE_ITEM_NAME="change item name",O.BSP_SUBTRACT="bsp subtract",O.BSP_INTERSECT="bsp intersect",O.BSP_UNION="bsp union",O.EXPORT_SCENE="export scene",O.LOAD_SCENE="load scene",O.TOGGLE_STATS="toggle stats",O.IMPORT_SCENE="import scene",O.FAIL_COMPUTE="fail compute",O.OPEN_TREE_ITEM="open tree item";n("8e6e"),n("456d");var S=n("bd86"),M=(n("7514"),n("ac6a"),[{name:"MeshBasicMaterial",type:"MeshBasicMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0}},{name:"MeshNormalMaterial",type:"MeshNormalMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0}},{name:"MeshLambertMaterial",type:"MeshLambertMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0,emissive:"#ffffff",emissiveIntensity:.1,reflectivity:.1,refractionRatio:.1}},{name:"MeshPhongMaterial",type:"MeshPhongMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0,emissive:"#ffffff",emissiveIntensity:.1,reflectivity:.1,refractionRatio:.1,specular:"#ffffff",shininess:.1,bumpMap:null,bumpScale:.1,normalMap:null,normalScale:.1,displacementMap:null,displacementScale:.1}},{name:"MeshToonMaterial",type:"MeshToonMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0}},{name:"MeshStandardMaterial",type:"MeshStandardMaterial",param:{color:"#ff0000",map:null,wireframe:!1,opacity:.1,transparent:!0,side:null,visible:!0,emissive:"#ffffff",emissiveIntensity:.1,roughness:.1,metalness:.1,bumpMap:null,bumpScale:.1,normalMap:null,normalScale:.1,displacementMap:null,displacementScale:.1}}]);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(a,!0).forEach(function(t){Object(S["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var N=function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"getType",value:function(e){var t;return e=e.split(".")[0],t="visible"==e.substr(-7).toLowerCase()?this.TYPE_SWITCH:"color"==e.substr(-5).toLowerCase()?this.TYPE_COLOR:"wireframe"==e||"transparent"==e?this.TYPE_SWITCH:this.checkMap(e)?this.TYPE_IMAGE:"emissive"==e||"specular"==e?this.TYPE_COLOR:this.TYPE_NUMBER,t}},{key:"checkMap",value:function(e){return"map"==e.substr(-3).toLowerCase()}},{key:"setObjectValue",value:function(e,t,a){var n=t.split(".");if(1==n.length)e[t]=a;else{for(var i=e,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=a}}},{key:"copyTransform",value:function(e){var t=e.position,a=e.rotation,n=e.scale;return{position:{x:t.x,y:t.y,z:t.z},rotation:{x:this.radianToAngle(a.x),y:this.radianToAngle(a.y),z:this.radianToAngle(a.z)},scale:{scalar:n.x}}}},{key:"radianToAngle",value:function(e){return 180*e/Math.PI}},{key:"angleToRadian",value:function(e){return e*Math.PI/180}},{key:"getCurMaterial",value:function(e){return Array.isArray(e.material)?(console.log("material isArray"),e.material[0]):e.material}},{key:"disposeMaterial",value:function(e){var t;t=Array.isArray(e.material)?e.material:[e.material],t.forEach(function(e){e.dispose()})}},{key:"copyMaterialParam",value:function(e){if(!e)return null;e=this.getCurMaterial(e);var t=M.find(function(t){return t.type==e.type}),a={};for(var n in t.param)"normalScale"==n?a[n]=e[n]?e[n].x:.1:this.checkMap(n)?e[n]&&e[n].image?a[n]={image:e[n].image.currentSrc,repeatX:e[n].repeat.x,repeatY:e[n].repeat.y}:a[n]={}:a[n]=e[n];return a}},{key:"getObjectData",value:function(t,a,n,i){var r,s,o,l,c,u;if(t){if(r=t.type,l=e.copyTransform(t),u=t.uuid,"Mesh"==r){s="Mesh";var m,h=e.copyMaterialParam(t),d=t.geometry;m=t.geometry.isGeometry?{}:x({},d.attributes,{index:t.geometry.getIndex()}),o=t.geometry.parameters,c={geometry:m,material:h,materialType:t.material?t.material.type:""}}else"Light"==r.substr(-5)?(s=t.name,o=t.parameters):"Group"==r?s="Group":"Object3D"==r&&(s="Object3D");s=t.name||s}else r="Scene",s="Scene",o={fogVisible:!!a.fog,fogColor:a.fog?a.fog.color:"#9f9f9f",near:a.fog?a.fog.near:0,far:a.fog?a.fog.far:100,gridVisible:n,selectedColor:i||"#ff0000"};return{uuid:u,type:r,name:s,parameters:o,transform:l,extra:c}}}]),e}();N.TYPE_NUMBER="type number",N.TYPE_COLOR="type color",N.TYPE_IMAGE="type image",N.TYPE_SWITCH="type switch";n("6c7b");var j=function(e){function t(){var e;return Object(f["a"])(this,t),e=Object(p["a"])(this,Object(v["a"])(t).call(this)),e.w=512,e.h=512,e.canvas=document.createElement("canvas"),e.canvas.width=e.w,e.canvas.height=e.h,e.spriteMap=new _["CanvasTexture"](e.canvas),e.spriteMaterial=new _["SpriteMaterial"]({map:e.spriteMap,transparent:!0,sizeAttenuation:!0}),e.init(),e}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"init",value:function(){var e=new _["Sprite"](this.spriteMaterial);this.add(e)}},{key:"update",value:function(e){var t=this.canvas.getContext("2d");t.fillStyle="#409EFF",t.arc(this.w/2,this.h/2,this.w/2,0,2*Math.PI),t.fill(),t.font="180px bold",t.fillStyle="#ffffff",t.textAlign="center",t.textBaseline="middle",t.fillText(e,this.w/2,this.h/2),this.spriteMap.needsUpdate=!0,this.spriteMaterial.needsUpdate=!0}}]),t}(_["Object3D"]),G=(n("63d9"),function(e){function t(e,a){var n;return Object(f["a"])(this,t),n=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a)),n.helpVisible=!0,n.dragItem=new _["Mesh"](new _["SphereBufferGeometry"](.5),new _["MeshNormalMaterial"]),n.dragItem.name="custom drag",n.name="CustomAmbientLight",n.add(n.dragItem),n}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new _["Vector3"])}},{key:"parameters",get:function(){return{color:this.color,intensity:this.intensity,helpVisible:this.helpVisible}}}]),t}(_["AmbientLight"])),A=function(e){function t(e,a){var n;return Object(f["a"])(this,t),n=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a)),n.helpVisible=!0,n.dragItem=new _["Mesh"](new _["BoxBufferGeometry"](1,1,.2),new _["MeshNormalMaterial"]),n.dragItem.name="custom drag",n.name="CustomDirectionalLight",n.castShadow=!0,n.shadow.mapSize.width=512,n.shadow.mapSize.height=512,n.shadow.camera.near=.5,n.shadow.camera.far=500,n.add(n.dragItem),n}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new _["Vector3"])}},{key:"parameters",get:function(){return{color:this.color,intensity:this.intensity,helpVisible:this.helpVisible}}}]),t}(_["DirectionalLight"]),L=function(e){function t(e,a,n){var i;return Object(f["a"])(this,t),i=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a,n)),i.helpVisible=!0,i.dragItem=new _["Mesh"](new _["BoxBufferGeometry"],new _["MeshNormalMaterial"]),i.dragItem.name="custom drag",i.name="CustomHemisphereLight",i.add(i.dragItem),i}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new _["Vector3"])}},{key:"parameters",get:function(){return{skyColor:this.skyColor,groundColor:this.groundColor,intensity:this.intensity,helpVisible:this.helpVisible}}}]),t}(_["HemisphereLight"]),P=function(e){function t(e,a,n,i){var r;return Object(f["a"])(this,t),r=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a,n,i)),r.helpVisible=!0,r.dragItem=new _["Mesh"](new _["SphereBufferGeometry"](.4),new _["MeshNormalMaterial"]),r.dragItem.name="custom drag",r.name="CustomPointLight",r.castShadow=!0,r.add(r.dragItem),r}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new _["Vector3"])}},{key:"parameters",get:function(){return{color:this.color,intensity:this.intensity,distance:this.distance,decay:this.decay,helpVisible:this.helpVisible}}}]),t}(_["PointLight"]),R=function(e){function t(e,a,n,i,r,s){var o;return Object(f["a"])(this,t),o=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a,n,i,r,s)),o.helpVisible=!0,o.dragItem=new _["Mesh"](new _["BoxBufferGeometry"](.4),new _["MeshNormalMaterial"]),o.dragItem.name="custom drag",o.name="CustomSpotLight",o.castShadow=!0,o.add(o.dragItem),o}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new _["Vector3"])}},{key:"parameters",get:function(){return{color:this.color,intensity:this.intensity,distance:this.distance,angle:this.angle,exponent:this.exponent,decay:this.decay,helpVisible:this.helpVisible}}}]),t}(_["SpotLight"]),V=function(e){function t(e,a,n,i){var r;return Object(f["a"])(this,t),r=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a,n,i)),r.helpVisible=!0,r.dragItem=new _["Mesh"](new _["BoxBufferGeometry"](.2),new _["MeshNormalMaterial"]),r.dragItem.name="custom drag",r.name="CustomRectAreaLight",r.add(r.dragItem),r}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"update",value:function(){this.dragItem.lookAt(new _["Vector3"])}},{key:"parameters",get:function(){return{color:this.color,intensity:this.intensity,width:this.width,height:this.height,helpVisible:this.helpVisible}}}]),t}(_["RectAreaLight"]),B=function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"getBufferGeometry",value:function(e,t){var a;switch(e){case"BoxBufferGeometry":a=t?new _["BoxBufferGeometry"](t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments):new _["BoxBufferGeometry"](1,1,1);break;case"SphereBufferGeometry":a=t?new _["SphereBufferGeometry"](t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength):new _["SphereBufferGeometry"](.5,12,12);break;case"IcosahedronBufferGeometry":a=t?new _["IcosahedronBufferGeometry"](t.radius,t.detail):new _["IcosahedronBufferGeometry"](1,0);break;case"CylinderBufferGeometry":a=t?new _["CylinderBufferGeometry"](t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength):new _["CylinderBufferGeometry"](.5,1,2,8,1);break;case"OctahedronBufferGeometry":a=t?new _["OctahedronBufferGeometry"](t.radius,t.detail):new _["OctahedronBufferGeometry"](.5,0);break;case"TorusBufferGeometry":a=t?new _["TorusBufferGeometry"](t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc):new _["TorusBufferGeometry"](2,.5,8,20,2*Math.PI);break;case"ConeBufferGeometry":a=t?new _["ConeBufferGeometry"](t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength):new _["ConeBufferGeometry"](1,3,8,1);break;case"PlaneBufferGeometry":a=t?new _["PlaneBufferGeometry"](t.width,t.height,t.widthSegments,t.heightSegments):new _["PlaneBufferGeometry"](20,20);break;default:break}return a}},{key:"getGeometry",value:function(e,t){var a;switch(e){case"BoxGeometry":a=t?new _["BoxGeometry"](t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments):new _["BoxGeometry"](1,1,1);break;case"SphereGeometry":a=t?new _["SphereGeometry"](t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength):new _["SphereGeometry"](.5,12,12);break;case"IcosahedronGeometry":a=t?new _["IcosahedronGeometry"](t.radius,t.detail):new _["IcosahedronGeometry"](1,0);break;case"CylinderGeometry":a=t?new _["CylinderGeometry"](t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength):new _["CylinderGeometry"](.5,1,2,8,1);break;case"OctahedronGeometry":a=t?new _["OctahedronGeometry"](t.radius,t.detail):new _["OctahedronGeometry"](.5,0);break;case"TorusGeometry":a=t?new _["TorusGeometry"](t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc):new _["TorusGeometry"](2,.5,8,20,2*Math.PI);break;case"ConeGeometry":a=t?new _["ConeGeometry"](t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength):new _["ConeGeometry"](1,3,8,1);break;case"PlaneGeometry":a=t?new _["PlaneGeometry"](t.width,t.height,t.widthSegments,t.heightSegments):new _["PlaneGeometry"](20,20);break;default:break}return a}},{key:"getLight",value:function(e){var t,a=16777215;switch(e){case"AmbientLight":t=new G(a);break;case"DirectionalLight":t=new A(a);break;case"HemisphereLight":t=new L(a);break;case"PointLight":t=new P(a);break;case"SpotLight":t=new R(a);break;case"RectAreaLight":t=new V(a);break}return t}},{key:"getMaterial",value:function(e){var t;switch(e){case"MeshBasicMaterial":t=new _["MeshBasicMaterial"];break;case"MeshNormalMaterial":t=new _["MeshNormalMaterial"];break;case"MeshLambertMaterial":t=new _["MeshLambertMaterial"];break;case"MeshPhongMaterial":t=new _["MeshPhongMaterial"];break;case"MeshToonMaterial":t=new _["MeshToonMaterial"];break;case"MeshStandardMaterial":t=new _["MeshStandardMaterial"];break}return t}},{key:"getDrawBufferMesh",value:function(e,t,a,n){var i=new Float32Array(e),r=new Float32Array(t),s=new Float32Array(a),o=new _["BufferGeometry"];o.addAttribute("position",new _["BufferAttribute"](i,3)),o.addAttribute("normal",new _["BufferAttribute"](r,3)),o.addAttribute("uv",new _["BufferAttribute"](s,2)),o.setIndex(n);var l=new _["Mesh"](o,new _["MeshBasicMaterial"]({color:3355443}));return l}}]),e}(),D=(n("4917"),function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,[{key:"start",value:function(e,t,a,n){var i=new XMLHttpRequest;i.open("GET",e),i.onprogress=function(e){if(e.lengthComputable){var a=Math.floor(e.loaded/e.total*100);t(a)}},i.onreadystatechange=function(){4===i.readyState&&(200===i.status?a():n())},i.send()}}],[{key:"getUrlPath",value:function(e){e=this.getLink(e);var t=e.split("/"),a=t.pop(),n=t.join("/")+"/";return console.log(n),console.log(a),[n,a]}},{key:"getLink",value:function(e){return e.match(/http(s?):/)?e:window.CFG.baseURL+e}}]),e}()),$=n("75fc"),U=function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"getCanvas",value:function(e,t){var a=512,n=512,i=document.createElement("canvas");i.width=a,i.height=n;var r=i.getContext("2d");return r.font="400px bold",r.fillStyle=t,r.textAlign="center",r.textBaseline="middle",r.fillText(e,a/2,n/2),i}},{key:"addAxes",value:function(e,t,a,n){var i=new _["CanvasTexture"](this.getCanvas(e,t)),r=new _["SpriteMaterial"]({map:i,transparent:!0,sizeAttenuation:!0}),s=new _["Sprite"](r);s.position.copy(a),n.add(s)}}]),e}(),F=function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"RGBtoHex",value:function(e,t,a){return this.toHex(e)+this.toHex(t)+this.toHex(a)}},{key:"toHex",value:function(e){return null==e?"00":(e=parseInt(e),0==e||isNaN(e)?"00":(e=Math.max(0,e),e=Math.min(e,255),e=Math.round(e),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16)))}},{key:"getRandomColor",value:function(){return(new _["Color"]).setHSL(Math.random(),1,.75)}}]),e}(),H=n("b1f1"),z=n("4721"),Y=function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"clear",value:function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose(),e.parent&&e.parent.remove(e)}}]),e}(),W=function(e){function t(e){var a;return Object(f["a"])(this,t),a=Object(p["a"])(this,Object(v["a"])(t).call(this)),a.multiple=!1,a.selectedColor="#ff0000",a.lines=[],a.scene=e,a}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"clear",value:function(){this.lines.forEach(function(e){Y.clear(e.line)}),this.lines=[]}},{key:"addNewLine",value:function(e){var t=this.lines.find(function(t){return t.obj==e});if(!t){var a=new _["BoxHelper"](e,new _["Color"](this.selectedColor));this.add(a),this.lines.push({obj:e,line:a})}}},{key:"removeObject",value:function(e){this.lines=this.lines.filter(function(t){return-1==e.indexOf(t.obj)||(Y.clear(t.line),!1)})}},{key:"deleteSelected",value:function(){this.lines.forEach(function(e){Y.clear(e.obj),Y.clear(e.line),"custom drag"==e.obj.name&&Y.clear(e.obj.parent)}),this.lines=[]}},{key:"select",value:function(e){this.multiple||this.clear(),this.addNewLine(e)}},{key:"update",value:function(){this.lines.forEach(function(e){e.line.position.copy(e.obj.position),e.line.update()})}},{key:"getBSPObjects",value:function(){var e=this.lines.map(function(e){return e.obj});return e&&2==e.length?e:null}},{key:"getSelectItems",value:function(){return this.lines.map(function(e){return e.obj})}}]),t}(_["Object3D"]),X=n("b5e1")(_),J=function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"subtract",value:function(e,t){if(this.checkCanCompute(e,t)){e.geometry.computeFaceNormals(),e.geometry.computeVertexNormals(),t.geometry.computeFaceNormals(),t.geometry.computeVertexNormals();var a=new X(e),n=new X(t),i=a.subtract(n),r=new _["MeshNormalMaterial"],s=i.toMesh(r);return s.geometry.mergeVertices(),s}}},{key:"intersect",value:function(e,t){if(this.checkCanCompute(e,t)){e.geometry.computeFaceNormals(),e.geometry.computeVertexNormals(),t.geometry.computeFaceNormals(),t.geometry.computeVertexNormals();var a=new X(e),n=new X(t),i=a.intersect(n),r=new _["MeshNormalMaterial"],s=i.toMesh(r);return s}}},{key:"union",value:function(e,t){if(this.checkCanCompute(e,t)){e.geometry.computeFaceNormals(),e.geometry.computeVertexNormals(),t.geometry.computeFaceNormals(),t.geometry.computeVertexNormals();var a=new X(e),n=new X(t),i=a.union(n),r=new _["MeshNormalMaterial"],s=i.toMesh(r);return s.geometry.computeFaceNormals(),s.geometry.computeVertexNormals(),s}}},{key:"checkCanCompute",value:function(e,t){return!!(e.geometry&&t.geometry&&e.geometry.faces&&t.geometry.faces)||(O.ins.send(O.FAIL_COMPUTE,"操作的物体应为基本的Geometry对象"),!1)}}]),e}(),K=function(e){function t(e,a,n){var i;return Object(f["a"])(this,t),i=Object(p["a"])(this,Object(v["a"])(t).call(this)),i.scene=e,i.orbitControls=new z["a"](a,n),i.transformControls=new H["a"](a,n),i.add(i.transformControls),i.selectLine=new W(i.scene),i.add(i.selectLine),i.transformControls.addEventListener("dragging-changed",function(e){console.log("dragging-changed"),i.orbitControls.enabled=!e.value}),i.transformControls.addEventListener("objectChange",function(e){console.log("objectChange")}),i}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"deleteSelected",value:function(){this.remove(this.transformControls),this.selectLine.deleteSelected()}},{key:"setMode",value:function(e){this.transformControls.setMode(e)}},{key:"toggerSpace",value:function(){var e="local"===this.transformControls.space?"world":"local";this.transformControls.setSpace(e)}},{key:"select",value:function(e){e?(this.selectLine.select(e),this.transformControls.attach(e),this.add(this.transformControls)):(this.selectLine.clear(),this.remove(this.transformControls))}},{key:"bspSubtract",value:function(){var e=this.selectLine.getBSPObjects();if(e){var t=J.subtract(e[0],e[1]);return t}return null}},{key:"bspIntersect",value:function(){var e=this.selectLine.getBSPObjects();if(e){var t=J.intersect(e[0],e[1]);return t}return null}},{key:"bspUnion",value:function(){var e=this.selectLine.getBSPObjects();if(e){var t=J.union(e[0],e[1]);return t}return null}},{key:"cancelSelected",value:function(){this.remove(this.transformControls),this.selectLine.clear()}}]),t}(_["Object3D"]),Q=function(e){function t(e,a){var n;return Object(f["a"])(this,t),n=Object(p["a"])(this,Object(v["a"])(t).call(this,e,a)),n.castShadow=!0,n}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"update",value:function(e){this.position.copy(e.position),this.rotation.copy(e.rotation)}}]),t}(_["DirectionalLight"]),q=function(e){function t(){var e;return Object(f["a"])(this,t),e=Object(p["a"])(this,Object(v["a"])(t).call(this)),e.list=[],e.name="CustomGroup",e}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"push",value:function(e){this.hasItem(e)||(this.list.push(e),this.add(e))}},{key:"hasItem",value:function(e){var t=this.list.find(function(t){return t==e});return!!t}},{key:"clear",value:function(e){this.list.forEach(function(t){t.position.copy(t.getWorldPosition(new _["Vector3"])),t.rotation.setFromQuaternion(t.getWorldQuaternion(new _["Quaternion"])),t.scale.copy(t.getWorldScale(new _["Vector3"])),e.add(t)})}}]),t}(_["Group"]),Z=function(e){function t(e,a,n){var i;return Object(f["a"])(this,t),i=Object(p["a"])(this,Object(v["a"])(t).call(this)),i.name=t.SINGLE_ROOT,i.scene=e,i.camera=a,i.container=new _["Object3D"],i.container.name="Container",i.add(i.container),i.lights=new _["Object3D"],i.lights.name="Lights",i.add(i.lights),i.selectView=new K(e,a,n),i.selectView.name="SelectView",i.add(i.selectView),i.focusLight=new Q(16777215,1.84),i.lights.add(i.focusLight),i.rayCaster=new _["Raycaster"],i.grid=new _["GridHelper"](80,80,13560057,15790320),i.grid.material.transparent=!0,i.grid.material.opacity=.54,i.scene.add(i.grid),U.addAxes("x","#ff0000",new _["Vector3"](42,.5,0),i.grid),U.addAxes("-x","#ff0000",new _["Vector3"](-42,.5,0),i.grid),U.addAxes("z","#0000ff",new _["Vector3"](0,.5,42),i.grid),U.addAxes("-z","#0000ff",new _["Vector3"](0,.5,-42),i.grid),i}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"addFaceMaterial",value:function(){for(var e=new _["BoxGeometry"],t=[],a=0;a<4;a++){var n=new _["MeshBasicMaterial"];n.color=F.getRandomColor(),t.push(n)}for(var i=0;i<e.faces.length;i++)e.faces[i].materialIndex=i%t.length;var r=new _["Mesh"](e,t);this.container.add(r)}},{key:"select",value:function(e,t){var a,n=new _["Vector2"];n.x=e.clientX/window.innerWidth*2-1,n.y=-e.clientY/window.innerHeight*2+1,this.rayCaster.setFromCamera(n,t);var i=[].concat(Object($["a"])(this.container.children),Object($["a"])(this.lights.children)),r=this.rayCaster.intersectObjects(i,!0);return r[0]&&(a=r[0].object,"custom drag"==a.name&&(a=a.parent),console.log(a)),this.selectView.select(a),a}},{key:"deleteItem",value:function(){this.selectView.deleteSelected()}},{key:"addLight",value:function(e){this.lights.add(e)}},{key:"addObject",value:function(e){this.container.add(e)}},{key:"addItem",value:function(e){var t;if(t=-1!=e.indexOf("Buffer")?B.getBufferGeometry(e,null):B.getGeometry(e,null),!t)return null;var a=new _["MeshStandardMaterial"]({color:F.getRandomColor(),emissive:0,side:_["FrontSide"],transparent:!0,opacity:1,flatShading:!0,wireframe:!1}),n=new _["Mesh"](t,a);return n.name=e,n.castShadow=!0,n.receiveShadow=!0,this.container.add(n),n}},{key:"update",value:function(){var e=this;this.selectView.selectLine.update(),this.lights.children.forEach(function(t){t.update(e.camera)})}},{key:"bspSubtract",value:function(){var e=this.selectView.bspSubtract();e&&this.container.add(e)}},{key:"bspIntersect",value:function(){var e=this.selectView.bspIntersect();e&&this.container.add(e)}},{key:"bspUnion",value:function(){var e=this.selectView.bspUnion();e&&this.container.add(e)}},{key:"makeGroup",value:function(){var e=this.selectView.selectLine.getSelectItems();if(e.length>1){var t=new q;return e.forEach(function(e){t.push(e)}),this.selectView.selectLine.clear(),this.addObject(t),t}return null}},{key:"splitGroup",value:function(){var e=this.selectView.selectLine.getSelectItems();if(1==e.length){var t=e[0];"CustomGroup"==t.name&&(t.clear(this.container),this.container.remove(t),this.selectView.cancelSelected())}}},{key:"multiple",set:function(e){this.selectView.selectLine.multiple=e}},{key:"selectedColor",set:function(e){this.selectView.selectLine.selectedColor=e},get:function(){return this.selectView.selectLine.selectedColor}}]),t}(_["Object3D"]);Z.SINGLE_ROOT="SingleRoot";var ee=function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"getInsideObject",value:function(e){return e&&"Scene"!=e.type?(e&&(t="custom drag"==e.name?e.parent:e),t):null;var t}},{key:"getOutSideObject",value:function(e){if(!e||"Scene"==e.type)return null;var t=e,a=0;while(t){if(t.parent&&t.parent.name==Z.SINGLE_ROOT)return t;if(++a>20)break;t=t.parent}return t}},{key:"getDragParent",value:function(e){var t=e,a=0;while(t=t.parent){if("load_scene"==t.name)return t;if(++a>20)return null}return null}}]),e}(),te=function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"parse",value:function(e){for(var t=[],a=0;a<e.children.length;a++){var n=this.parse(e.children[a]);t.push(n)}return{name:e.name||e.type,uuid:e.uuid,children:t}}}]),e}(),ae=n("9e5c"),ne=function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"toGLTFData",value:function(e,t,a){var n=this,i=!1,r=new ae["a"];r.parse(t,function(e){if(console.log(e),e instanceof ArrayBuffer)n.saveArrayBuffer(e,"scene.glb");else{var t=JSON.stringify(e,null,2);n.saveString(t,a+".gltf")}},{binary:!e,embedImages:i,forcePowerOfTwoTextures:i,truncateDrawRange:!1})}},{key:"save",value:function(e,t){var a=document.createElement("a");a.style.display="none",document.body.appendChild(a),a.href=URL.createObjectURL(e),a.download=t,a.click()}},{key:"saveString",value:function(e,t){this.save(new Blob([e],{type:"text/plain"}),t)}},{key:"saveArrayBuffer",value:function(e,t){this.save(new Blob([e],{type:"application/octet-stream"}),t)}},{key:"getOffsetVector3",value:function(e){var t=(new _["Box3"]).setFromObject(e),a=(t.min.x+t.max.x)/2,n=(t.min.y+t.max.y)/2,i=(t.min.z+t.max.z)/2,r=new _["Vector3"](a,n,i);return console.log("box size :"),console.log(t),r}},{key:"getFitScale",value:function(e,t){var a=(new _["Box3"]).setFromObject(e),n=a.getSize(new _["Vector3"]),i=Math.max(n.x,n.y,n.z),r=t/i;return console.log(i+" --\x3e "+r),r}}]),e}(),ie=(n("34ef"),n("af56"),n("9c29"),n("5df3"),n("f400"),function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"getMinMax",value:function(e,t,a){for(var n={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},i=t;i<t+a;i++)for(var r=0;r<e.itemSize;r++){var s=e.array[i*e.itemSize+r];n.min[r]=Math.min(n.min[r],s),n.max[r]=Math.max(n.max[r],s)}return n}},{key:"getPaddedBufferSize",value:function(e){return 4*Math.ceil(e/4)}},{key:"getPaddedArrayBuffer",value:function(e,t){t=t||0;var a=this.getPaddedBufferSize(e.byteLength);if(a!==e.byteLength){var n=new Uint8Array(a);if(n.set(new Uint8Array(e)),0!==t)for(var i=e.byteLength;i<a;i++)n[i]=t;return n.buffer}return e}},{key:"stringToArrayBuffer",value:function(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t=new Uint8Array(new ArrayBuffer(e.length)),a=0,n=e.length;a<n;a++){var i=e.charCodeAt(a);t[a]=i>255?32:i}return t.buffer}},{key:"listAdd",value:function(e,t){-1==e.indexOf(t)&&e.push(t)}},{key:"createIndices",value:function(e){if(null===e.index){for(var t=[],a=0,n=e.attributes.position.count;a<n;a++)t[a]=a;e.setIndex(t)}}}]),e}()),re=function e(){Object(f["a"])(this,e),this.meshes=new Map,this.attributes=new Map,this.attributesNormalized=new Map,this.materials=new Map,this.textures=new Map,this.images=new Map},se=1e3,oe=1001,le=1002,ce=1003,ue=1004,me=1005,he=1006,de=1007,fe=1008,pe=1023,ve={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963},ge={};ge[ce]=ve.NEAREST,ge[ue]=ve.NEAREST_MIPMAP_NEAREST,ge[me]=ve.NEAREST_MIPMAP_LINEAR,ge[he]=ve.LINEAR,ge[de]=ve.LINEAR_MIPMAP_NEAREST,ge[fe]=ve.LINEAR_MIPMAP_LINEAR,ge[oe]=ve.CLAMP_TO_EDGE,ge[se]=ve.REPEAT,ge[le]=ve.MIRRORED_REPEAT;var ye,be,we,Ee=0,Ce=[],_e=new Map,Te=0,ke=function(){function e(){Object(f["a"])(this,e),this.asset={version:"2.0",generator:"GLTFExporter"},this.meshes=[],this.materials=[],this.scene=0,this.scenes=[],this.nodes=[],this.bufferViews=[],this.buffers=[],this.accessors=[],this.textures=[],this.samplers=[],this.images=[],this.extensionsUsed=[],Ee=0,Ce=[],this.cacheData=new re}return Object(C["a"])(e,[{key:"parse",value:function(e,t,a){var n=this;this.processScene(t);var i=new Blob(Ce,{type:"application/octet-stream"});if(this.buffers[0]={byteLength:i.size},e){var r=new FileReader;r.readAsArrayBuffer(i),r.onloadend=function(){var e=12,t=1179937895,i=2,s=8,o=1313821514,l=5130562,c=n.packageJson();console.log(c);var u=ie.getPaddedArrayBuffer(r.result),m=new DataView(new ArrayBuffer(s));m.setUint32(0,u.byteLength,!0),m.setUint32(4,l,!0);var h=ie.getPaddedArrayBuffer(ie.stringToArrayBuffer(JSON.stringify(c)),32),d=new DataView(new ArrayBuffer(s));d.setUint32(0,h.byteLength,!0),d.setUint32(4,o,!0);var f=new ArrayBuffer(e),p=new DataView(f);p.setUint32(0,t,!0),p.setUint32(4,i,!0);var v=e+d.byteLength+h.byteLength+m.byteLength+u.byteLength;p.setUint32(8,v,!0);var g=new Blob([f,d,h,m,u],{type:"application/octet-stream"});ne.save(g,a+".glb")}}else{this.buffers[0].uri=a+".bin",ne.save(i,a+".bin");var s=this.packageJson();console.log(s),ne.saveString(JSON.stringify(s),a+".gltf")}}},{key:"packageJson",value:function(){return{asset:this.asset,meshes:this.meshes,materials:this.materials,scene:this.scene,scenes:this.scenes,nodes:this.nodes,bufferViews:this.bufferViews,buffers:this.buffers,accessors:this.accessors,textures:this.textures,samplers:this.samplers,images:this.images,extensionsUsed:this.extensionsUsed}}},{key:"processScene",value:function(e){var t={nodes:[]},a=this.processNode(e);null!==a&&t.nodes.push(a),this.scenes.push(t)}},{key:"processAccessors",value:function(e,t,a,n){var i,r={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};if(e.array.constructor===Float32Array)i=ve.FLOAT;else if(e.array.constructor===Uint32Array)i=ve.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)i=ve.UNSIGNED_SHORT;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");i=ve.UNSIGNED_BYTE}if(void 0===a&&(a=0),void 0===n&&(n=e.count),void 0!==t&&null===t.index){var s=a+n,o=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;a=Math.max(a,t.drawRange.start),n=Math.min(s,o)-a,n<0&&(n=0)}if(0===n)return null;var l,c=ie.getMinMax(e,a,n);void 0!==t&&(l=e===t.index?ve.ELEMENT_ARRAY_BUFFER:ve.ARRAY_BUFFER);var u=this.processBufferView(e,i,a,n,l),m={bufferView:u.id,componentType:i,count:n,max:c.max,min:c.min,type:r[e.itemSize]};return this.accessors.push(m),this.accessors.length-1}},{key:"processNode",value:function(e){var t={};if(t.matrix=e.matrix.elements,t.translation=e.position.toArray(),t.rotation=e.rotation.toArray(),t.scale=e.scale.toArray(),e.isMesh||e.isLine||e.isPoints){var a=this.processMesh(e);null!==a&&(t.mesh=a)}if(e.children.length>0){for(var n=[],i=0,r=e.children.length;i<r;i++){var s=e.children[i];if(s.visible){var o=this.processNode(s);null!==o&&n.push(o)}}n.length>0&&(t.children=n)}this.nodes.push(t);var l=this.nodes.length-1;return l}},{key:"processBufferView",value:function(e,t,a,n,i){var r;r=t===ve.UNSIGNED_BYTE?1:t===ve.UNSIGNED_SHORT?2:4;for(var s=ie.getPaddedBufferSize(n*e.itemSize*r),o=new DataView(new ArrayBuffer(s)),l=0,c=s/r,u=0;u<c;u++){var m=e.array[u];t===ve.FLOAT?o.setFloat32(l,m,!0):t===ve.UNSIGNED_INT?o.setUint32(l,m,!0):t===ve.UNSIGNED_SHORT?o.setUint16(l,m,!0):t===ve.UNSIGNED_BYTE&&o.setUint8(l,m),l+=r}var h={buffer:this.processBuffer(o.buffer),byteOffset:Ee,byteLength:s};void 0!==i&&(h.target=i),i===ve.ARRAY_BUFFER&&(h.byteStride=e.itemSize*r),Ee+=s,this.bufferViews.push(h);var d={id:this.bufferViews.length-1,byteLength:0};return d}},{key:"processBuffer",value:function(e){return Ce.push(e),0}},{key:"processMesh",value:function(e){var t=e.geometry.uuid+":"+e.material.uuid;if(this.cacheData.meshes.has(t))return this.cacheData.meshes.get(t);var a=e.geometry;if(!a.isBufferGeometry){console.warn("GLTFExporter: Exporting THREE.Geometry will increase file size. Use BufferGeometry instead.");var n=new _["BufferGeometry"];n.fromGeometry(a),a=n}var i={},r={position:"POSITION",normal:"NORMAL",color:"COLOR_0",uv:"TEXCOORD_0",uv2:"TEXCOORD_1",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"};for(var s in ie.createIndices(a),a.attributes){console.log("attributeName: "+s);var o=a.attributes[s];if(s=r[s],s&&(s=s.toUpperCase()),this.cacheData.attributes.has(this.getUID(o)))i[s]=this.cacheData.attributes.get(this.getUID(o)),console.log("使用缓存属性");else{var l=this.processAccessors(o,a);null!==l&&(i[s]=l,this.cacheData.attributes.set(this.getUID(o),l))}}var c=Array.isArray(e.material);if(c&&0===a.groups.length)return null;for(var u=c?e.material:[e.material],m=c?a.groups:[{materialIndex:0,start:void 0,count:void 0}],h=[],d=0,f=m.length;d<f;d++){var p={mode:4,attributes:i};null!==a.index&&(p.indices=this.processAccessors(a.index,a,m[d].start,m[d].count));var v=this.processMaterial(u[m[d].materialIndex]);null!==v&&(p.material=v),h.push(p)}var g={primitives:h};this.meshes.push(g);var y=this.meshes.length-1;return this.cacheData.meshes.set(t,y),y}},{key:"processMaterial",value:function(e){var t=this.cacheData.materials.get(e);if(t)return t;var a={pbrMetallicRoughness:{baseColorFactor:[e.color.r,e.color.g,e.color.b,e.opacity],metallicFactor:e.metalness,roughnessFactor:e.roughness}};return e.isMeshBasicMaterial&&(a.extensions={KHR_materials_unlit:{}},ie.listAdd(this.extensionsUsed,"KHR_materials_unlit")),e.emissive&&(a.emissiveFactor=[e.emissive.r,e.emissive.g,e.emissive.b]),e.map&&(a.pbrMetallicRoughness.baseColorTexture=this.processMap(e.map)),e.normalMap&&(a.normalTexture=this.processMap(e.normalMap)),(e.transparent||e.alphaTest>0)&&(a.alphaMode=e.opacity<1?"BLEND":"MASK",e.alphaTest>0&&.5!==e.alphaTest&&(a.alphaCutoff=e.alphaTest)),e.side===_["DoubleSide"]&&(a.doubleSided=!0),this.materials.push(a),t=this.materials.length-1,this.cacheData.materials.set(e,t),t}},{key:"processMap",value:function(e){var t=this.processTexture(e);ie.listAdd(this.extensionsUsed,"KHR_texture_transform");var a=e.repeat;return{index:t,scale:1,extensions:{KHR_texture_transform:{scale:[a.x,a.y]}}}}},{key:"processTexture",value:function(e){if(this.cacheData.textures.has(e))return this.cacheData.textures.get(e);var t={magFilter:ge[e.magFilter],minFilter:ge[e.minFilter],wrapS:ge[e.wrapS],wrapT:ge[e.wrapT]};this.samplers.push(t);var a,n=this.samplers.length-1;if(this.cacheData.images.has(e.image.currentSrc))a=this.cacheData.images.get(e.image.currentSrc);else{var i={mimeType:e.format==pe?"image/png":"image/jpeg",uri:e.image.currentSrc};this.images.push(i),a=this.images.length-1,this.cacheData.images.set(e.image.currentSrc,a)}var r={sampler:n,source:a};this.textures.push(r);var s=this.textures.length-1;return this.cacheData.textures.set(e,s),s}},{key:"getUID",value:function(e){return _e.has(e)||_e.set(e,Te++),_e.get(e)}}]),e}(),Oe=function(){function e(){Object(f["a"])(this,e)}return Object(C["a"])(e,null,[{key:"standardExport",value:function(e,t){ne.toGLTFData(e,t,"standerd")}},{key:"customExport",value:function(e,t){var a=new ke;a.parse(e,t,"custom")}}]),e}(),Se=function(){function e(t){Object(f["a"])(this,e),this.isRoot=!0,this.isInside=!1,O.ins.init(t),this.canvas=t,this.renderer=new _["WebGLRenderer"]({canvas:t,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(new _["Color"](10461087)),this.renderer.shadowMap.enabled=!0,this.scene=new _["Scene"],this.camera=new _["PerspectiveCamera"](75,window.innerWidth/window.innerHeight,.1,100),this.camera.position.set(3,4,5),this.camera.lookAt(new _["Vector3"]),this.loading=new j,this.root=new Z(this.scene,this.camera,t),this.scene.add(this.root),this.addEventListener(),this.animate()}return Object(C["a"])(e,[{key:"addEventListener",value:function(){var e=this;window.addEventListener("resize",function(t){return e.onResize(t)},!1),this.canvas.addEventListener("mousedown",function(t){console.log("mousedown"),e.mouseDown(t)}),window.addEventListener("keydown",function(t){switch(console.log(t.keyCode),t.keyCode){case 81:e.root.selectView.toggerSpace();break;case 87:e.root.selectView.setMode("translate");break;case 69:e.root.selectView.setMode("rotate");break;case 82:e.root.selectView.setMode("scale");break;case 17:e.root.multiple=!0;break}}),window.addEventListener("keyup",function(t){switch(t.keyCode){case 17:e.root.multiple=!1;break}})}},{key:"standardExport",value:function(e){Oe.standardExport(e,this.root.container)}},{key:"customExport",value:function(e){Oe.customExport(e,this.root.container)}},{key:"changeIsRoot",value:function(e){this.isRoot=e}},{key:"setStats",value:function(e){this.stats=e}},{key:"onResize",value:function(e){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"deleteItem",value:function(){this.root.deleteItem()}},{key:"copyItem",value:function(){var e=this.curMesh,t=e.clone();this.root.addObject(t),this.sendItemInfo(t)}},{key:"changeItemTransform",value:function(e){var t=this.curMesh;t.position.set(e.position.x,e.position.y,e.position.z),t.rotation.set(N.angleToRadian(e.rotation.x),N.angleToRadian(e.rotation.y),N.angleToRadian(e.rotation.z));var a=e.scale.scalar;t.scale.set(a,a,a),this.sendItemInfo(t)}},{key:"changeGeometryParam",value:function(e){var t,a=this.curMesh;t=-1!=a.name.indexOf("Buffer")?B.getBufferGeometry(a.name,e):B.getGeometry(a.name,e),t&&(this.updateGroupGeometry(a,t),this.sendItemInfo(a))}},{key:"toggerMaterial",value:function(e){var t=this.curMesh;if(t){N.disposeMaterial(t);var a=B.getMaterial(e);a&&(t.material=a),this.sendItemInfo(t)}}},{key:"changeCommonMaterial",value:function(e,t){var a=this.curMesh,n=N.getCurMaterial(a),i=N.getType(e);"normalScale"==e?n[e]&&n[e].set(1,-1).multiplyScalar(Number(t)):i==N.TYPE_COLOR?n[e]=new _["Color"](t):i==N.TYPE_NUMBER?n[e]=Number(t):i==N.TYPE_SWITCH&&(n[e]=Boolean(t)),this.sendItemInfo(a)}},{key:"changeRepeatMaterial",value:function(e,t,a){var n=this.curMesh,i=N.getCurMaterial(n);i[e]&&("repeatX"==t?i[e].repeat.x=Number(a):"repeatY"==t&&(i[e].repeat.y=Number(a)),i[e].needsUpdate=!0,i.needsUpdate=!0,this.sendItemInfo(n))}},{key:"changeTextureMaterial",value:function(e,t){var a=this,n=this.curMesh,i=N.getCurMaterial(n),r=(new _["TextureLoader"]).load(t,function(){i[e].needsUpdate=!0,i.needsUpdate=!0,a.sendItemInfo(n)});r.wrapS=_["RepeatWrapping"],r.wrapT=_["RepeatWrapping"],i[e]=r}},{key:"changeScene",value:function(e){if(e.fogVisible){var t=this.scene.fog;t?(t.color=new _["Color"](e.color),t.near=Number(e.near),t.far=Number(e.far)):this.scene.fog=new _["Fog"](new _["Color"](e.fogColor).getHex(),Number(e.near),Number(e.far))}else this.scene.fog=null;this.renderer.setClearColor(new _["Color"](e.fogColor)),this.root.grid.visible=e.gridVisible,this.root.selectedColor=e.selectedColor}},{key:"deleteTexture",value:function(e){var t=this.curMesh,a=N.getCurMaterial(t);a[e]=null,a.needsUpdate=!0,this.sendItemInfo(t)}},{key:"changeLightParam",value:function(e,t){var a=this.curMesh,n=N.getType(e);n==N.TYPE_COLOR?a[e]=new _["Color"](t):n==N.TYPE_NUMBER?a[e]=Number(t):n==N.TYPE_SWITCH&&(a[e]=Boolean(t)),this.sendItemInfo(a)}},{key:"selectObject",value:function(e){this.root.selectView.select(e),this.sendItemInfo(e)}},{key:"mouseDown",value:function(e){e.preventDefault();var t=this.root.select(e,this.camera);this.selectObject(t)}},{key:"updateGroupGeometry",value:function(e,t){e.geometry.dispose(),e.geometry=t,this.sendItemInfo(e)}},{key:"addLight",value:function(e){var t=B.getLight(e);t&&(this.root.addLight(t),this.sendItemInfo(t))}},{key:"addObject",value:function(e,t){var a=this.root.addItem(e);a&&this.sendItemInfo(a)}},{key:"sendItemInfo",value:function(e){this.insideObj=ee.getInsideObject(e);var t=N.getObjectData(this.insideObj,this.scene,this.root.grid.visible,this.root.selectedColor),a=[t];O.ins.send(O.ITEM_INFO,a)}},{key:"fitModel",value:function(e){e.traverse(function(e){if(e.isMesh&&(e.name="load_mesh",Array.isArray(e.material))){console.log("array material");for(var t=0;t<e.material.length;t++)e.material[t].roughness=.3,e.material[t].metalness=.1}});var t=e;while(1==t.children.length)t=t.children[0];ne.getOffsetVector3(t);var a=ne.getFitScale(t,10);t.position;t.position.set(0,0,0),t.scale.multiplyScalar(a),this.root.addObject(t),t.name="load_scene"}},{key:"importGltf",value:function(e){var t=this,a=new T["a"];a.parse(e,"",function(e){console.log("gltf loaded"),console.log(e),t.fitModel(e.scene)})}},{key:"addCustomGeometry",value:function(e){if(e){var t=JSON.parse(e.position),a=JSON.parse(e.normal),n=JSON.parse(e.uv),i=JSON.parse(e.index),r=B.getDrawBufferMesh(t,a,n,i);this.root.addObject(r)}}},{key:"loadServeGltf",value:function(e){var t=this,a=new T["a"];a.setCrossOrigin("anonymous");var n=D.getUrlPath(e);a.setPath(n[0]),a.load(n[1],function(e){t.fitModel(e.scene),t.scene.remove(t.loading)},function(e){var a=Math.floor(e.loaded/e.total*100);console.log("load "+a+"%"),t.loading.update(a+"%"),t.scene.add(t.loading)})}},{key:"loadServeFbx",value:function(e){var t=this,a=new k["a"];a.setCrossOrigin("anonymous");var n=D.getUrlPath(e);a.setPath(n[0]),a.load(n[1],function(e){t.fitModel(e),t.scene.remove(t.loading)},function(e){var a=Math.floor(e.loaded/e.total*100);console.log("load "+a+"%"),t.loading.update(a+"%"),t.scene.add(t.loading)})}},{key:"loadServeModel",value:function(e){e.toLocaleLowerCase().indexOf(".fbx")?this.loadServeFbx(e):this.loadServeGltf(e)}},{key:"makeGroup",value:function(){var e=this.root.makeGroup();this.selectObject(e)}},{key:"splitGroup",value:function(){this.root.splitGroup()}},{key:"animate",value:function(){var e=this;requestAnimationFrame(function(){e.animate()}),this.renderer.render(this.scene,this.camera),this.stats&&this.stats.update(),this.root.update()}},{key:"getSceneTree",value:function(){var e=te.parse(this.scene);return e}},{key:"selectedItemByUUID",value:function(e){var t=this.scene.getObjectByProperty("uuid",e);this.selectObject(t)}},{key:"changeItemName",value:function(e){this.curMesh.name=e}},{key:"bspSubtract",value:function(){this.root.bspSubtract()}},{key:"bspIntersect",value:function(){this.root.bspIntersect()}},{key:"bspUnion",value:function(){this.root.bspUnion()}},{key:"curMesh",get:function(){return this.insideObj}}]),e}(),Me=n("ef20");n("386d"),n("3b2b");function Ie(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null}var xe=function(e){function t(){return Object(f["a"])(this,t),Object(p["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"mounted",value:function(){var e=this;ye=new Se(this.$refs.canvas),this.$refs.canvas.addEventListener("mouseenter",this.mouseenter),O.ins.on(O.ITEM_INFO,function(t){e.changeItemInfo(t)}),O.ins.on(O.FAIL_COMPUTE,function(t){e.failCompute(t)}),O.ins.on(O.CHANGE_MATERIAL,function(t){e.changeMaterial(t)}),O.ins.on(O.DELETE_TEXTURE,function(t){e.deleteTexture(t)}),O.ins.on(O.DELETE_ITEM,function(t){e.deleteItem(t)}),O.ins.on(O.COPY_ITEM,function(t){e.copyItem(t)}),O.ins.on(O.ADD_LIGHT,function(t){e.addLight(t)}),O.ins.on(O.CUSTOM_GEOMETRY,function(t){e.addCustomGeometry(t)}),O.ins.on(O.MAKE_GROUP,function(t){e.makeGroup(t)}),O.ins.on(O.SPLIT_GROUP,function(t){e.splitGroup(t)}),O.ins.on(O.GET_SCENE_TREE,function(t){e.getSceneTree(t)}),O.ins.on(O.SELECT_TREE_ITEM,function(t){e.selectTreeItem(t)}),O.ins.on(O.CHANGE_ITEM_NAME,function(t){e.changeItemName(t)}),O.ins.on(O.BSP_SUBTRACT,function(t){e.bspSubtract(t)}),O.ins.on(O.BSP_INTERSECT,function(t){e.bspIntersect(t)}),O.ins.on(O.BSP_UNION,function(t){e.bspUnion(t)}),O.ins.on(O.EXPORT_SCENE,function(t){e.handleExport(t)}),O.ins.on(O.LOAD_SCENE,function(t){e.handleLoadScene(t)}),O.ins.on(O.TOGGLE_STATS,function(t){e.handleStats(t)}),O.ins.on(O.IMPORT_SCENE,function(t){e.handleFile(t)}),O.ins.on(O.CHANGE_ITEM_PARAM,function(t){e.changeItemParam(t)}),this.initStats(),this.checkPreview()}},{key:"checkPreview",value:function(){var e=Ie("url");console.log(e),e&&ye.loadServeModel(e)}},{key:"initStats",value:function(){we=new Me["a"],we.setMode(0),we.domElement.style.position="absolute",we.domElement.style.left="204px",we.domElement.style.top="90px",document.body.appendChild(we.domElement),ye.setStats(we)}},{key:"addLight",value:function(e){ye.addLight(e.detail)}},{key:"changeMaterial",value:function(e){ye.toggerMaterial(e.detail)}},{key:"deleteTexture",value:function(e){ye.deleteTexture(e.detail)}},{key:"changeItemParam",value:function(e){console.log("Paramview组件发过来的消息"),console.log(e.detail);var t=e.detail.value,a=e.detail.name.split("."),n=a[0];if("geometry"==n){var i=Object.assign(this.$store.state.curParam,{});i[a[1]]=Number(t),ye.changeGeometryParam(i)}else if("position"==n||"rotation"==n||"scale"==n){var r=Object.assign(this.$store.state.transform,{});r[n][a[1]]=Number(t),ye.changeItemTransform(r)}else if("material"==n){var s=Object.assign(this.$store.state.curMaterial,{});N.checkMap(a[1])?("image"==a[2]?ye.changeTextureMaterial(a[1],t):ye.changeRepeatMaterial(a[1],a[2],t),s[a[1]]||(s[a[1]]={}),s[a[1]][a[2]]=t):(s[a[1]]=t,ye.changeCommonMaterial(a[1],t))}else if("light"==n)ye.changeLightParam(a[1],t);else if("scene"==n){var o=Object.assign(this.$store.state,{}),l=o.parameters;l[a[1]]=t,this.$store.commit("changeItemInfo",[o]),ye.changeScene(l)}}},{key:"deleteItem",value:function(e){ye.deleteItem()}},{key:"copyItem",value:function(e){ye.copyItem()}},{key:"mouseenter",value:function(e){this.$store.state.dragItem&&ye.addObject(this.$store.state.dragItem.name,e)}},{key:"changeSelectItem",value:function(e){this.$store.commit("changeCurItemName",e.detail.name),this.$store.commit("changeCurDragType","mesh"),this.$store.commit("changeDrawer",!0),this.$store.commit("changeMaterialType",e.detail.materialType),this.$store.commit("changeCurMaterial",e.detail.material),this.$store.commit("changeCurParams",e.detail.parameters),this.$store.commit("changeCurTransform",e.detail.transform)}},{key:"changeSelectLight",value:function(e){this.$store.commit("changeCurItemName",e.detail.name),this.$store.commit("changeCurDragType","light"),this.$store.commit("changeDrawer",!0),this.$store.commit("changeCurParams",e.detail.parameters),this.$store.commit("changeCurTransform",e.detail.transform)}},{key:"changeItemInfo",value:function(e){be=e.detail,this.$store.commit("changeItemInfo",be),this.$store.commit("changeDrawer",!0),be[0]&&be[0].uuid&&O.ins.send(O.OPEN_TREE_ITEM,be[0].uuid)}},{key:"changeCurTransform",value:function(e){this.$store.commit("changeCurTransform",e.detail)}},{key:"handleFile",value:function(e){console.log(e);var t=new FileReader;t.readAsArrayBuffer(e.detail),t.onload=function(e){console.info(t.result);var a=new DataView(t.result);console.log(a),ye.importGltf(a.buffer)}}},{key:"handleLoadScene",value:function(e){var t=this;this.$prompt("请输入文件地址","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){ye.loadServeModel(e.value)}).catch(function(){t.$message({type:"info",message:"取消输入"})})}},{key:"handleStats",value:function(e){var t=we.domElement.style;console.log(t),"none"==t.display?t.display="block":t.display="none"}},{key:"handleExport",value:function(e){var t=e.detail;1==t?ye.standardExport(!0):2==t?ye.standardExport(!1):3==t?ye.customExport(!0):4==t&&ye.customExport(!1)}},{key:"addCustomGeometry",value:function(e){ye.addCustomGeometry(e.detail)}},{key:"makeGroup",value:function(e){ye.makeGroup()}},{key:"splitGroup",value:function(e){ye.splitGroup()}},{key:"getSceneTree",value:function(e){var t=ye.getSceneTree();console.log("game getSceneTree"),console.log(t),this.$store.commit("changeSceneTree",[t])}},{key:"selectTreeItem",value:function(e){ye.selectedItemByUUID(e.detail)}},{key:"changeItemName",value:function(e){ye.changeItemName(e.detail)}},{key:"bspSubtract",value:function(e){ye.bspSubtract()}},{key:"bspIntersect",value:function(e){ye.bspIntersect()}},{key:"bspUnion",value:function(e){ye.bspUnion()}},{key:"failCompute",value:function(e){this.$message(e.detail)}}]),t}(b["d"]);y["a"]([Object(b["b"])()],xe.prototype,"msg",void 0),xe=y["a"]([b["a"]],xe);var Ne=xe,je=Ne,Ge=(n("8672"),Object(o["a"])(je,w,E,!1,null,"6f2dbd39",null)),Ae=Ge.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left-side",class:{scene:"second"==e.tabName}},[a("div",{staticClass:"main"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:"新增",name:"first"}},[a("AddView")],1),a("el-tab-pane",{attrs:{label:"层级",name:"second"}},[a("TreeView")],1)],1)],1)])},Pe=[],Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse",{attrs:{accordion:""},on:{change:e.handleCollapse},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"geometry",name:"0"}},e._l(e.geometryList,function(t,n){return a("div",{key:t.name,staticClass:"geometry"},[a("img",{staticClass:"img",attrs:{draggable:"false",src:t.img,"data-type":"geometry","data-idx":n}}),a("div",{staticClass:"tip"},[e._v(e._s(t.name))])])}),0),a("el-collapse-item",{attrs:{title:"bufferGeometry",name:"1"}},e._l(e.bufferGeometryList,function(t,n){return a("div",{key:t.name,staticClass:"geometry"},[a("img",{staticClass:"img",attrs:{draggable:"false",src:t.img,"data-type":"bufferGeometry","data-idx":n}}),a("div",{staticClass:"tip"},[e._v(e._s(t.name))])])}),0),a("el-collapse-item",{attrs:{title:"light",name:"2"}},e._l(e.lightList,function(t,n){return a("div",{key:t.name,staticClass:"light"},[a("el-button",{attrs:{"data-idx":n},on:{click:e.addLight}},[e._v(e._s(t.name))])],1)}),0)],1)},Ve=[],Be=function(e){function t(){var e;return Object(f["a"])(this,t),e=Object(p["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.activeNames="0",e.geometryList=[],e.bufferGeometryList=[],e.lightList=[],e}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"mounted",value:function(){var e=this;this.$axios.get("asset/data.json").then(function(t){e.geometryList=t.data.geometry,e.bufferGeometryList=t.data.bufferGeometry,e.lightList=t.data.light}),this.$el.addEventListener("mousedown",function(t){var a,n=t.target;"img"==n.className&&(a="bufferGeometry"==n.dataset.type?e.bufferGeometryList[n.dataset.idx]:e.geometryList[n.dataset.idx],e.$store.commit("changeDrag",a),window.addEventListener("mousemove",e.mouseMove),window.addEventListener("mouseup",e.mouseUp))})}},{key:"handleCollapse",value:function(e){console.log(e)}},{key:"handleClick",value:function(e){console.log(e),"1"==e.index&&O.ins.send(O.GET_SCENE_TREE,null)}},{key:"handleNodeClick",value:function(e){console.log(e),O.ins.send(O.SELECT_TREE_ITEM,e.uuid)}},{key:"mouseMove",value:function(e){}},{key:"mouseUp",value:function(e){window.removeEventListener("mousemove",this.mouseMove),window.removeEventListener("mouseup",this.mouseUp),this.$store.commit("changeDrag",null)}},{key:"addLight",value:function(e){var t=e.currentTarget,a=this.lightList[t.dataset.idx];O.ins.send(O.ADD_LIGHT,a.name)}},{key:"sceneTree",get:function(){return this.$store.state.sceneTree}}]),t}(b["d"]);y["a"]([Object(b["c"])()],Be.prototype,"activeNames",void 0),y["a"]([Object(b["c"])()],Be.prototype,"geometryList",void 0),y["a"]([Object(b["c"])()],Be.prototype,"bufferGeometryList",void 0),y["a"]([Object(b["c"])()],Be.prototype,"lightList",void 0),Be=y["a"]([Object(b["a"])({components:{}})],Be);var De=Be,$e=De,Ue=(n("936c"),Object(o["a"])($e,Re,Ve,!1,null,"491555fb",null)),Fe=Ue.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tree",{ref:"tree",attrs:{"show-checkbox":"",data:e.sceneTree,"node-key":"uuid",props:e.defaultProps,"default-expanded-keys":e.keys,"default-checked-keys":e.keys,"default-expand-all":!1,accordion:!0},on:{"node-click":e.handleNodeClick}})},ze=[],Ye=function(e){function t(){var e;return Object(f["a"])(this,t),e=Object(p["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.defaultProps={children:"children",label:"name"},e.keys=[],e}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"mounted",value:function(){var e=this;O.ins.on(O.OPEN_TREE_ITEM,function(t){e.openTreeItem(t)})}},{key:"handleNodeClick",value:function(e){O.ins.send(O.SELECT_TREE_ITEM,e.uuid)}},{key:"openTreeItem",value:function(e){this.$refs.tree.setCheckedKeys([]);var t=e.detail;this.keys=[t]}},{key:"sceneTree",get:function(){return this.$store.state.sceneTree}}]),t}(b["d"]);y["a"]([Object(b["c"])()],Ye.prototype,"defaultProps",void 0),y["a"]([Object(b["c"])()],Ye.prototype,"keys",void 0),Ye=y["a"]([Object(b["a"])({components:{}})],Ye);var We=Ye,Xe=We,Je=(n("0596"),Object(o["a"])(Xe,He,ze,!1,null,"2d51d190",null)),Ke=Je.exports,Qe=function(e){function t(){var e;return Object(f["a"])(this,t),e=Object(p["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.tabName="first",e}return Object(g["a"])(t,e),Object(C["a"])(t,[{key:"mounted",value:function(){}},{key:"handleClick",value:function(e){console.log(e),"1"==e.index&&O.ins.send(O.GET_SCENE_TREE,null)}}]),t}(b["d"]);y["a"]([Object(b["c"])()],Qe.prototype,"tabName",void 0),Qe=y["a"]([Object(b["a"])({components:{AddView:Fe,TreeView:Ke}})],Qe);var qe=Qe,Ze=qe,et=(n("9f87"),Object(o["a"])(Ze,Le,Pe,!1,null,"17a21062",null)),tt=et.exports,at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right-side",class:{open:e.drawer}},[a("div",{staticClass:"param-info"},[a("div",{staticClass:"title"},[a("div",{staticClass:"name"},[e._v("属性")]),a("div",{staticClass:"close",on:{click:e.handleClose}},[a("i",{staticClass:"el-icon-close"})])]),a("div",{staticClass:"cur-name"},[a("input",{ref:"name",staticClass:"name",attrs:{type:"txt"},domProps:{value:e.curItemName}}),a("el-button",{attrs:{size:"mini"},on:{click:e.handleChangeName}},[e._v("修改")])],1),a("el-collapse",{attrs:{accordion:""},on:{change:e.handleCollapse},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[e.showMaterial?a("el-collapse-item",{attrs:{title:"材质",name:"0"}},[a("MaterialView")],1):e._e(),a("el-collapse-item",{attrs:{title:"状态参数",name:"1"}},[a("ProtoView",{attrs:{label:e.paramType,parameters:e.parameters}})],1),e.transform?a("el-collapse-item",{attrs:{title:"位置",name:"2"}},[a("ProtoView",{attrs:{label:"position",parameters:e.transform.position}})],1):e._e(),e.transform?a("el-collapse-item",{attrs:{title:"旋转",name:"3"}},[a("ProtoView",{attrs:{label:"rotation",parameters:e.transform.rotation}})],1):e._e(),e.transform?a("el-collapse-item",{attrs:{title:"缩放",name:"4"}},[a("ProtoView",{attrs:{label:"scale",parameters:e.transform.scale}})],1):e._e(),e.showGeometryView?a("el-collapse-item",{attrs:{title:"数据",name:"5"}},[a("GeometryView")],1):e._e()],1),e.showBtns?a("div",{staticClass:"btns"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleMakeGroup}},[e._v("成组")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSplitGroup}},[e._v("解组")])],1),a("el-button-group",{staticClass:"right-btns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleCopy}},[e._v("复制")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.handleDelete}},[e._v("删除")])],1)],1):e._e()],1)])},nt=[],it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"material-view"},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleChoose}},[a("span",{staticClass:"el-dropdown-link"},[a("span",{staticClass:"mat-btn"},[e._v("当前材质："+e._s(e.materialType))]),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.list,function(t,n){return a("el-dropdown-item",{key:t.name,attrs:{command:n}},[e._v(e._s(t.name))])}),1)],1),e._l(e.material,function(e,t){return a("div",{key:t,staticClass:"edit"},[a("ParamView",{attrs:{label:t,value:e,pname:"material."+t}})],1)})],2)},rt=[],st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"param-view"},[a(e.aim,{tag:"component",attrs:{label:e.label,value:e.value,pname:e.pname},on:{change:e.handleChange}})],1)},ot=[],lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"number-view"},[a("div",{staticClass:"param"},[a("div",{staticClass:"state"},[a("div",{staticClass:"label"},[e._v(e._s(e.label)+":")]),a("input",{staticClass:"value",attrs:{type:"text","data-pname":e.pname},domProps:{value:e.value},on:{input:e.handleChange}})]),a("div",{staticClass:"block"},[a("input",{staticClass:"range",attrs:{type:"range",min:e.min,max:e.max,step:e.step,"data-pname":e.pname},domProps:{value:e.value},on:{input:e.handleChange}}),a("i",{staticClass:"el-icon-s-tools setting",on:{click:function(t){e.configVisible=!e.configVisible}}})]),e.configVisible?a("div",{staticClass:"config"},[a("div",{staticClass:"row"},[a("div",{staticClass:"label"},[e._v("最小值:")]),a("input",{staticClass:"value",attrs:{type:"text","data-pname":"min"},domProps:{value:e.min},on:{input:e.handleSetting}})]),a("div",{staticClass:"row"},[a("div",{staticClass:"label"},[e._v("最大值:")]),a("input",{staticClass:"value",attrs:{type:"text","data-pname":"max"},domProps:{value:e.max},on:{input:e.handleSetting}})]),a("div",{staticClass:"row"},[a("div",{staticClass:"label"},[e._v("步长:")]),a("input",{staticClass:"value",attrs:{type:"text","data-pname":"step"},domProps:{value:e.step},on:{input:e.handleSetting}})])]):e._e()])])},ct=[],ut={data:function(){return{configVisible:!1,min:0,max:2,step:.01}},props:["label","value","pname"],computed:{},mounted:function(){},methods:{handleChange:function(e){this.$emit("change",this.pname,e.target.value)},handleSetting:function(e){var t=e.target.dataset.pname;this[t]=e.target.value}}},mt=ut,ht=(n("2ae0"),Object(o["a"])(mt,lt,ct,!1,null,"50db13c2",null)),dt=ht.exports,ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"color-view"},[a("div",{staticClass:"param"},[a("div",{staticClass:"state"},[a("div",{staticClass:"label"},[e._v(e._s(e.label)+":")]),a("input",{staticClass:"value",attrs:{type:"color","data-pname":e.pname},domProps:{value:e.color},on:{input:e.handleChange}})])])])},pt=[],vt=(n("a481"),n("7618")),gt={data:function(){return{configVisible:!1,min:0,max:10,step:1}},props:["label","value","pname"],computed:{color:function(){if(console.log("color ==== "+Object(vt["a"])(this.value)),!this.value)return"#ffffff";var e;if("string"==typeof this.value)e=this.value.replace("0x","#");else{var t=255*this.value.r,a=255*this.value.g,n=255*this.value.b;e="#"+F.RGBtoHex(t,a,n)}return console.log(this.value,e),e}},mounted:function(){},methods:{handleChange:function(e){var t=e.target.value;this.$emit("change",this.pname,t)},handleSetting:function(e){var t=e.target.dataset.pname;this[t]=e.target.value}}},yt=gt,bt=(n("d185"),Object(o["a"])(yt,ft,pt,!1,null,"19589ed7",null)),wt=bt.exports,Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"switch-view"},[a("div",{staticClass:"param"},[a("div",{staticClass:"state"},[a("div",{staticClass:"label"},[e._v(e._s(e.label)+":")]),a("div",{staticClass:"color",class:{active:e.value},on:{click:e.handleChange}},[a("div",{staticClass:"bar"})])])])])},Ct=[],_t={data:function(){return{}},props:["label","value","pname"],computed:{},mounted:function(){},methods:{handleChange:function(e){this.$emit("change",this.pname,!this.value)}}},Tt=_t,kt=(n("21b2"),Object(o["a"])(Tt,Et,Ct,!1,null,"9f960daa",null)),Ot=kt.exports,St=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-view"},[a("div",{staticClass:"param"},[a("div",{staticClass:"state"},[a("div",{staticClass:"label"},[e._v(e._s(e.label)+":")]),e.value&&e.value.image?a("div",{staticClass:"img",style:{"background-image":"url("+e.value.image+")"},on:{click:e.handleEdit}}):e._e(),a("div",{staticClass:"choose",on:{click:e.handleEdit}},[a("i",{staticClass:"el-icon-picture-outline"}),e._v(" 修改")]),a("div",{staticClass:"delete",on:{click:e.handleDelete}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 删除")])]),e.value&&e.value.repeatX?a("NumberView",{attrs:{label:"repeatX",value:e.value.repeatX,pname:"material."+e.label+".repeatX"},on:{change:e.handleChange}}):e._e(),e.value&&e.value.repeatY?a("NumberView",{attrs:{label:"repeatY",value:e.value.repeatY,pname:"material."+e.label+".repeatY"},on:{change:e.handleChange}}):e._e()],1)])},Mt=[],It={data:function(){return{}},props:["label","value","pname"],components:{NumberView:dt},computed:{editing:function(){return this.$store.state.changeTexureViewVisible}},watch:{},mounted:function(){},methods:{handleChange:function(e,t){this.$emit("change",e,t)},handleEdit:function(e){this.$store.commit("changeTexureViewVisible",!0),this.$store.commit("changeTexureViewType",this.pname+".image")},handleDelete:function(e){O.ins.send(O.DELETE_TEXTURE,this.label)}}},xt=It,Nt=(n("9396"),Object(o["a"])(xt,St,Mt,!1,null,"3f2a8c0a",null)),jt=Nt.exports,Gt={data:function(){return{}},props:["label","value","pname"],components:{NumberView:dt,ColorView:wt,SwitchView:Ot,ImageView:jt},computed:{material:function(){return this.$store.state.curMaterial},aim:function(){var e=N.getType(this.label);switch(e){case N.TYPE_SWITCH:return"SwitchView";case N.TYPE_COLOR:return"ColorView";case N.TYPE_IMAGE:return"ImageView";default:return"NumberView"}}},mounted:function(){},methods:{handleChange:function(e,t){O.ins.send(O.CHANGE_ITEM_PARAM,{name:e,value:t})}}},At=Gt,Lt=(n("e02f"),Object(o["a"])(At,st,ot,!1,null,"ee9d3c46",null)),Pt=Lt.exports,Rt={data:function(){return{cur:"",list:[]}},components:{ParamView:Pt},computed:{materialType:function(){return this.$store.state.extra.materialType},material:function(){return this.$store.state.extra.material}},mounted:function(){this.list=M},methods:{handleChoose:function(e){this.$store.state.materialType!=this.list[e].name&&O.ins.send(O.CHANGE_MATERIAL,this.list[e].name)},handleChange:function(e,t){}}},Vt=Rt,Bt=(n("6850"),Object(o["a"])(Vt,it,rt,!1,null,"297a8dee",null)),Dt=Bt.exports,$t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"proto-view"},e._l(e.parameters,function(t,n){return a("div",{key:n,staticClass:"edit"},[a("ParamView",{attrs:{label:n,value:t,pname:e.label+"."+n}})],1)}),0)},Ut=[],Ft={data:function(){return{}},props:["parameters","label"],components:{ParamView:Pt},computed:{},mounted:function(){},methods:{handleChange:function(t,a){var n=e.target.dataset.name;console.log(n);var i=n.split(".");if(1==i.length){var r={};r[n]=Number(e.target.value);var s=Object.assign(this.$store.state.curParam,r);this.$store.commit("changeCurParams",s),console.log("changeCurParams"),O.ins.send(O.CHANGE_PARAM,s)}else{var o=Object.assign(this.$store.state.curTransform,{});o[i[0]][i[1]]=Number(e.target.value),this.$store.commit("changeCurTransform",o),console.log("changeCurTransform"),O.ins.send(O.CHANGE_TRANSFORM,o)}}}},Ht=Ft,zt=(n("3cc4"),Object(o["a"])(Ht,$t,Ut,!1,null,"0abb74db",null)),Yt=zt.exports,Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-view"},[e.info?[e.info.position?a("div",{staticClass:"comm"},[a("div",{staticClass:"label",on:{click:function(t){return e.log(e.info.position)}}},[e._v("position")]),a("div",{staticClass:"info",on:{click:function(t){return e.log(e.info.position,!0)}}},[a("div",{staticClass:"tip"},[e._v("length: "+e._s(e.info.position.count*e.info.position.itemSize))]),a("div",{staticClass:"tip"},[e._v("count: "+e._s(e.info.position.count))]),a("div",{staticClass:"tip"},[e._v("itemSize: "+e._s(e.info.position.itemSize))])])]):e._e(),e.info.normal?a("div",{staticClass:"comm"},[a("div",{staticClass:"label",on:{click:function(t){return e.log(e.info.normal)}}},[e._v("normal")]),a("div",{staticClass:"info",on:{click:function(t){return e.log(e.info.normal,!0)}}},[a("div",{staticClass:"tip"},[e._v("length: "+e._s(e.info.normal.count*e.info.normal.itemSize))]),a("div",{staticClass:"tip"},[e._v("count: "+e._s(e.info.normal.count))]),a("div",{staticClass:"tip"},[e._v("itemSize: "+e._s(e.info.normal.itemSize))])])]):e._e(),e.info.uv?a("div",{staticClass:"comm"},[a("div",{staticClass:"label",on:{click:function(t){return e.log(e.info.uv)}}},[e._v("uv")]),a("div",{staticClass:"info",on:{click:function(t){return e.log(e.info.uv,!0)}}},[a("div",{staticClass:"tip"},[e._v("length: "+e._s(e.info.uv.count*e.info.uv.itemSize))]),a("div",{staticClass:"tip"},[e._v("count: "+e._s(e.info.uv.count))]),a("div",{staticClass:"tip"},[e._v("itemSize: "+e._s(e.info.uv.itemSize))])])]):e._e(),e.info.index?a("div",{staticClass:"comm"},[a("div",{staticClass:"label",on:{click:function(t){return e.log(e.info.index)}}},[e._v("index")]),a("div",{staticClass:"info",on:{click:function(t){return e.log(e.info.index,!0)}}},[a("div",{staticClass:"tip"},[e._v("length: "+e._s(e.info.index.count))])])]):e._e()]:[a("div",{staticClass:"none"},[e._v("无数据")])]],2)},Xt=[],Jt={data:function(){return{}},components:{},computed:{info:function(){return this.$store.state.extra.geometry}},methods:{log:function(e,t){t?console.log("["+e.array.join(",")+"]"):console.log(e.array)}}},Kt=Jt,Qt=(n("4ecd"),Object(o["a"])(Kt,Wt,Xt,!1,null,"63a8bb28",null)),qt=Qt.exports,Zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"compute-view"},[a("el-button-group",[a("el-button",{attrs:{type:"small"},on:{click:function(t){return e.handleCompute("subtract")}}},[e._v("subtract")]),a("el-button",{attrs:{type:"small"},on:{click:function(t){return e.handleCompute("intersect")}}},[e._v("intersect")]),a("el-button",{attrs:{type:"small"},on:{click:function(t){return e.handleCompute("union")}}},[e._v("union")])],1)],1)},ea=[],ta={data:function(){return{}},components:{},computed:{fog:function(){return this.$store.state.fog}},methods:{handleCompute:function(e){var t=[O.BSP_SUBTRACT,O.BSP_INTERSECT,O.BSP_UNION],a=["subtract","intersect","union"],n=a.indexOf(e);O.ins.send(t[n],null)}}},aa=ta,na=(n("8997"),Object(o["a"])(aa,Zt,ea,!1,null,"0e076d01",null)),ia=na.exports,ra={data:function(){return{value:0,direction:"rtl",activeNames:["0"]}},components:{MaterialView:Dt,ProtoView:Yt,GeometryView:qt,ComputeView:ia},computed:{paramType:function(){var e=this.$store.state.type;return e=e||"","Mesh"==e?"geometry":"Light"==e.substr(-5)?"light":"Scene"==e?"scene":""},curItemName:function(){return this.$store.state.name},childName:function(){return this.$store.state.childName},showMaterial:function(){var e=this.$store.state.extra;return e&&e.material},showBtns:function(){return"Scene"!=this.$store.state.type},showGeometryView:function(){var e=this.$store.state.extra;return e&&e.geometry},parameters:function(){var e={},t=this.$store.state.parameters;for(var a in t)e[a]=t[a]||0;return e},transform:function(){return this.$store.state.transform},materialType:function(){return this.$store.state.extra.materialType},material:function(){return this.$store.state.extra.material},drawer:function(){return this.$store.state.drawer},curDragType:function(){return this.$store.state.curDragType}},methods:{handleChangeName:function(e){console.log(this.curItemName,this.$refs.name.value),O.ins.send(O.CHANGE_ITEM_NAME,this.$refs.name.value),O.ins.send(O.GET_SCENE_TREE,null)},handleClose:function(){this.$store.commit("changeDrawer",!1)},handleCopy:function(){O.ins.send(O.COPY_ITEM),O.ins.send(O.GET_SCENE_TREE,null)},handleDelete:function(){this.$store.commit("changeDrawer",!1),O.ins.send(O.DELETE_ITEM),O.ins.send(O.GET_SCENE_TREE,null)},handleMakeGroup:function(){O.ins.send(O.MAKE_GROUP),O.ins.send(O.GET_SCENE_TREE,null)},handleSplitGroup:function(){O.ins.send(O.SPLIT_GROUP),O.ins.send(O.GET_SCENE_TREE,null)},handleCollapse:function(e){console.log(e)},handleChange:function(e){}}},sa=ra,oa=(n("a537"),Object(o["a"])(sa,at,nt,!1,null,"6c609e3f",null)),la=oa.exports,ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"texture-view"},[a("el-dialog",{staticClass:"list",attrs:{title:"选择贴图",visible:e.visible},on:{close:e.handleClose}},e._l(e.list,function(t,n){return a("div",{key:n,staticClass:"block",on:{click:function(a){return e.handleChange(t.url)}}},[a("div",{staticClass:"img",style:{"background-image":"url("+t.url+")"}}),a("div",{staticClass:"name"},[e._v(e._s(t.name))])])}),0)],1)},ua=[],ma={data:function(){return{list:[]}},components:{},computed:{visible:function(){return this.$store.state.texureViewVisible},chooseImage:function(){return this.$store.state.changeChooseImage}},mounted:function(){var e=this;this.$axios.get("asset/texture/list.json").then(function(t){e.list=t.data})},methods:{handleClose:function(){this.$store.commit("changeTexureViewVisible",!1)},handleChoose:function(e){this.$store.commit("changeCurMaterial",this.list[e].param)},handleChange:function(e){var t=this.$store.state.texureViewType;O.ins.send(O.CHANGE_ITEM_PARAM,{name:t,value:e}),this.$store.commit("changeTexureViewVisible",!1)}}},ha=ma,da=(n("f861"),Object(o["a"])(ha,ca,ua,!1,null,"9fe496a2",null)),fa=da.exports,pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-geometry"},[a("el-dialog",{attrs:{title:"自定义物体",visible:e.visible},on:{close:e.handleClose}},[a("div",{staticClass:"label"},[e._v("position: 例如:[1,2,3]")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.position,expression:"position"}],staticClass:"txt",attrs:{rows:"4"},domProps:{value:e.position},on:{input:function(t){t.target.composing||(e.position=t.target.value)}}}),a("div",{staticClass:"label"},[e._v("normal: 例如:[1,2,3]")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.normal,expression:"normal"}],staticClass:"txt",attrs:{rows:"4"},domProps:{value:e.normal},on:{input:function(t){t.target.composing||(e.normal=t.target.value)}}}),a("div",{staticClass:"label"},[e._v("uv: 例如:[1,2,3]")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.uv,expression:"uv"}],staticClass:"txt",attrs:{rows:"4"},domProps:{value:e.uv},on:{input:function(t){t.target.composing||(e.uv=t.target.value)}}}),a("div",{staticClass:"label"},[e._v("index: 例如:[1,2,3]")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.index,expression:"index"}],staticClass:"txt",attrs:{rows:"4"},domProps:{value:e.index},on:{input:function(t){t.target.composing||(e.index=t.target.value)}}}),a("el-button",{staticClass:"btn",attrs:{type:"primary",icon:"el-icon-position"},on:{click:e.handleSure}},[e._v("确定")])],1)],1)},va=[],ga={data:function(){return{position:"",normal:"",uv:"",index:""}},components:{},computed:{visible:function(){return this.$store.state.customGeometryVisible}},mounted:function(){},methods:{handleSure:function(){this.position&&this.normal&&this.uv&&this.index?(this.$store.commit("changeCustomGeometryVisible",!1),O.ins.send(O.CUSTOM_GEOMETRY,{position:this.position,normal:this.normal,uv:this.uv,index:this.index})):this.$message("请输入正确数据")},handleClose:function(){this.$store.commit("changeCustomGeometryVisible",!1)}}},ya=ga,ba=(n("1730"),Object(o["a"])(ya,pa,va,!1,null,"fba4e85a",null)),wa=ba.exports,Ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-view"},[a("input",{ref:"file",staticClass:"file",attrs:{type:"file"},on:{change:e.handleSelectFile}}),a("el-dropdown",{staticClass:"item-nav",on:{command:e.handleFile}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-s-promotion"}),e._v("文件\n        ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0"}},[e._v("导入文件(gltf)")]),a("el-dropdown-item",{attrs:{command:"1"}},[e._v("标准导出(Base64)")]),a("el-dropdown-item",{attrs:{command:"2"}},[e._v("标准导出(Blob)")]),a("el-dropdown-item",{attrs:{command:"3"}},[e._v("自定义导出(embed)")]),a("el-dropdown-item",{attrs:{command:"4"}},[e._v("自定义导出")])],1)],1),a("el-dropdown",{staticClass:"item-nav",on:{command:e.handleCompute}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-edit-outline"}),e._v("运算\n        ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0"}},[e._v("相减(Subtract)")]),a("el-dropdown-item",{attrs:{command:"1"}},[e._v("相交(Intersect)")]),a("el-dropdown-item",{attrs:{command:"2"}},[e._v("相加(Union)")])],1)],1),a("el-dropdown",{staticClass:"item-nav",on:{command:e.handleTest}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-s-opportunity"}),e._v("测试\n        ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0"}},[e._v("加载远程文件")]),a("el-dropdown-item",{attrs:{command:"1"}},[e._v("运行状态")]),a("el-dropdown-item",{attrs:{command:"2"}},[e._v("添加自定义模型")])],1)],1)],1)},Ca=[],_a={data:function(){return{position:"",normal:"",uv:"",index:"",activeIndex:"1",activeIndex2:"1"}},components:{},computed:{visible:function(){return this.$store.state.customGeometryVisible}},mounted:function(){},methods:{handleSure:function(){this.position&&this.normal&&this.uv&&this.index?(this.$store.commit("changeCustomGeometryVisible",!1),O.ins.send(O.CUSTOM_GEOMETRY,{position:this.position,normal:this.normal,uv:this.uv,index:this.index})):this.$message("请输入正确数据")},handleClose:function(){this.$store.commit("changeCustomGeometryVisible",!1)},handleSelectFile:function(e){var t=e.target.files[0];t&&O.ins.send(O.IMPORT_SCENE,t)},handleFile:function(e){console.log(e),0==e?this.$refs.file.click():1==e?O.ins.send(O.EXPORT_SCENE,1):2==e?O.ins.send(O.EXPORT_SCENE,2):3==e?O.ins.send(O.EXPORT_SCENE,3):4==e&&O.ins.send(O.EXPORT_SCENE,4)},handleTest:function(e){console.log(e),0==e?O.ins.send(O.LOAD_SCENE,null):1==e?O.ins.send(O.TOGGLE_STATS,null):2==e&&this.$store.commit("changeCustomGeometryVisible",!0)},handleCompute:function(e){console.log(e),0==e?O.ins.send(O.BSP_SUBTRACT,null):1==e?O.ins.send(O.BSP_INTERSECT,null):2==e&&O.ins.send(O.BSP_UNION,null)}}},Ta=_a,ka=(n("7825"),Object(o["a"])(Ta,Ea,Ca,!1,null,"64439c6d",null)),Oa=ka.exports,Sa=function(e){function t(){return Object(f["a"])(this,t),Object(p["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(g["a"])(t,e),t}(b["d"]);Sa=y["a"]([Object(b["a"])({components:{Stage:Ae,LeftSide:tt,RightSide:la,TextureView:fa,CustomGeometry:wa,MenuView:Oa}})],Sa);var Ma=Sa,Ia=Ma,xa=Object(o["a"])(Ia,h,d,!1,null,null,null),Na=xa.exports;i["default"].use(m["a"]);var ja=new m["a"]({mode:"hash",base:"",routes:[{path:"/",redirect:"/home"},{path:"/home",component:Na},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),Ga=n("2f62");i["default"].use(Ga["a"]);var Aa=new Ga["a"].Store({state:{dragItem:Object,curParam:Object,curMaterial:Object,curTransform:{},isDrag:!1,drawer:!1,texureViewVisible:!1,customGeometryVisible:!1,texureViewType:null,materialType:null,chooseImage:null,curDragType:null,curItemName:null,itemInfo:null,isRoot:!0,childName:null,type:null,name:null,parameters:null,transform:null,extra:null,importType:null,sceneTree:[]},mutations:{changeItemInfo:function(e,t){var a=e.isRoot?t[0]:t[1];e.type=a.type,e.parameters=a.parameters,e.transform=a.transform,e.extra=a.extra,e.name=t[0].name,e.childName=t[1]?t[1].name:""},changeSceneTree:function(e,t){e.sceneTree=t},changeDrag:function(e,t){e.dragItem=t},changeCurParams:function(e,t){e.curParam=t},changeCurTransform:function(e,t){e.curTransform=t},changeCurMaterial:function(e,t){e.curMaterial=t},changeDrawer:function(e,t){e.drawer=t},changeTexureViewVisible:function(e,t){e.texureViewVisible=t},changeChooseImage:function(e,t){e.chooseImage=t},changeTexureViewType:function(e,t){e.texureViewType=t},changeMaterialType:function(e,t){e.materialType=t},changeCurDragType:function(e,t){e.curDragType=t},changeCurItemName:function(e,t){e.curItemName=t},changeCustomGeometryVisible:function(e,t){e.customGeometryVisible=t},changeIsRoot:function(e,t){e.isRoot=t},changeChildName:function(e,t){e.childName=t},changeImportType:function(e,t){e.importType=t}},actions:{}}),La=n("5c96"),Pa=n.n(La),Ra=n("bc3a"),Va=n.n(Ra);n("0fae");i["default"].use(Pa.a),i["default"].config.productionTip=!1,i["default"].prototype.$axios=Va.a,new i["default"]({router:ja,store:Aa,render:function(e){return e(u)}}).$mount("#app"),Va.a.get("http://192.168.1.150:8899/abc").then(function(e){console.log(e)})},d185:function(e,t,a){"use strict";var n=a("1b26"),i=a.n(n);i.a},e02f:function(e,t,a){"use strict";var n=a("e0ec"),i=a.n(n);i.a},e0ec:function(e,t,a){},edb4:function(e,t,a){},f861:function(e,t,a){"use strict";var n=a("10c3"),i=a.n(n);i.a},fecd:function(e,t,a){}});
//# sourceMappingURL=app.0b06c472.js.map